
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../chapter12/">
      
      
        <link rel="next" href="../chapter14/">
      
      
      <link rel="icon" href="../src/images/frontcover.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>13. Διαμέριση κώδικα - Μια σύγχρονη προσέγγιση στη γλώσσα C</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/styles.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: none; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#13" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Μια σύγχρονη προσέγγιση στη γλώσσα C" class="md-header__button md-logo" aria-label="Μια σύγχρονη προσέγγιση στη γλώσσα C" data-md-component="logo">
      
  <img src="../src/images/frontcover.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Μια σύγχρονη προσέγγιση στη γλώσσα C
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              13. Διαμέριση κώδικα
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Μια σύγχρονη προσέγγιση στη γλώσσα C" class="md-nav__button md-logo" aria-label="Μια σύγχρονη προσέγγιση στη γλώσσα C" data-md-component="logo">
      
  <img src="../src/images/frontcover.png" alt="logo">

    </a>
    Μια σύγχρονη προσέγγιση στη γλώσσα C
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Το βιβλίο
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Η πορεία της C μέχρι σήμερα
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Εισαγωγικές έννοιες στον προγραμματισμό με τη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Εντολές ελέγχου και επανάληψης
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Συναρτήσεις
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Πίνακες
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Δομές και ενώσεις
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Δείκτες
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8. Αλφαριθμητικά
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9. Διαχείριση μνήμης
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10. Υλοποίηση δομών δεδομένων και αλγορίθμων στη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11. Είσοδος/Έξοδος
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12. Ο προεπεξεργαστής της C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    13. Διαμέριση κώδικα
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    13. Διαμέριση κώδικα
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Πίνακας περιεχομένων">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Πίνακας περιεχομένων
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    <span class="md-ellipsis">
      13.1 Εισαγωγή
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#132-c" class="md-nav__link">
    <span class="md-ellipsis">
      13.2 Αρχεία επικαφαλίδων και αρχεία πηγαίου κώδικα στη C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.2 Αρχεία επικαφαλίδων και αρχεία πηγαίου κώδικα στη C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1321" class="md-nav__link">
    <span class="md-ellipsis">
      13.2.1 Διαχωρισμός διεπαφής και υλοποίησης
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1322" class="md-nav__link">
    <span class="md-ellipsis">
      13.2.2 Παράδειγμα διαχωρισμού διεπαφής και υλοποίησης
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#133" class="md-nav__link">
    <span class="md-ellipsis">
      13.3 Δημιουργία βιβλιοθηκών
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.3 Δημιουργία βιβλιοθηκών">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1331" class="md-nav__link">
    <span class="md-ellipsis">
      13.3.1 Παράδειγμα στατικής βιβλιοθήκης
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1332" class="md-nav__link">
    <span class="md-ellipsis">
      13.3.2 Παράδειγμα δυναμικής βιβλιοθήκης
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#134-make" class="md-nav__link">
    <span class="md-ellipsis">
      13.4 Οργάνωση μεταγλώττισης με το make
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.4 Οργάνωση μεταγλώττισης με το make">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1341-makefiles" class="md-nav__link">
    <span class="md-ellipsis">
      13.4.1 Παραδείγματα με makefiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1342-make" class="md-nav__link">
    <span class="md-ellipsis">
      13.4.2 Πέρα από το make
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    <span class="md-ellipsis">
      13.5 Ασκήσεις
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14. Ανάπτυξη οδηγούμενη από ελέγχους
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15. Αποσφαλμάτωση
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16. Στατική και δυναμική ανάλυση κώδικα
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17. Βιβλιοθήκες
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18. Θέματα στυλ στη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19. Γραφικό περιβάλλον διεπαφής
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20. Αλληλεπίδραση της C με την Python
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Α. Διαμόρφωση περιβάλλοντος ανάπτυξης κώδικα σε C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Β. Μεταγλώττιση και εκτέλεση κώδικα C χρησιμοποιώντας το Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Γ. Λήψη πληροφοριών για το σύστημα και το μεταγλωττιστή
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Πίνακας περιεχομένων">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Πίνακας περιεχομένων
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    <span class="md-ellipsis">
      13.1 Εισαγωγή
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#132-c" class="md-nav__link">
    <span class="md-ellipsis">
      13.2 Αρχεία επικαφαλίδων και αρχεία πηγαίου κώδικα στη C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.2 Αρχεία επικαφαλίδων και αρχεία πηγαίου κώδικα στη C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1321" class="md-nav__link">
    <span class="md-ellipsis">
      13.2.1 Διαχωρισμός διεπαφής και υλοποίησης
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1322" class="md-nav__link">
    <span class="md-ellipsis">
      13.2.2 Παράδειγμα διαχωρισμού διεπαφής και υλοποίησης
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#133" class="md-nav__link">
    <span class="md-ellipsis">
      13.3 Δημιουργία βιβλιοθηκών
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.3 Δημιουργία βιβλιοθηκών">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1331" class="md-nav__link">
    <span class="md-ellipsis">
      13.3.1 Παράδειγμα στατικής βιβλιοθήκης
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1332" class="md-nav__link">
    <span class="md-ellipsis">
      13.3.2 Παράδειγμα δυναμικής βιβλιοθήκης
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#134-make" class="md-nav__link">
    <span class="md-ellipsis">
      13.4 Οργάνωση μεταγλώττισης με το make
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13.4 Οργάνωση μεταγλώττισης με το make">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1341-makefiles" class="md-nav__link">
    <span class="md-ellipsis">
      13.4.1 Παραδείγματα με makefiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1342-make" class="md-nav__link">
    <span class="md-ellipsis">
      13.4.2 Πέρα από το make
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    <span class="md-ellipsis">
      13.5 Ασκήσεις
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="13">13. Διαμέριση κώδικα</h1>
<p><i>Σύνοψη</i> Διαμέριση κώδικα C σε αρχεία επικεφαλίδων και αρχεία πηγαίου κώδικα, διαχωρισμός διεπαφής και υλοποίησης, δημιουργία στατικών και δυναμικών βιβλιοθηκών στη C, οργάνωση μεταγλώττισης με το λογισμικό make και makefiles, το make και άλλα build συστήματα.  </p>
<p><i>Προαπαιτούμενη γνώση</i> Τύποι δεδομένων, είσοδος/έξοδος, δομές επιλογής και επανάληψης, συναρτήσεις, πίνακες, δομές, δείκτες, αλφαριθμητικά, εντολές προεπεξεργαστή.</p>
<h2 id="131">13.1 Εισαγωγή</h2>
<p>Η διαμέριση κώδικα είναι ένας τρόπος να διασπαστεί ένα πρόγραμμα σε μικρότερα τμήματα. Αποτελεί βασική τεχνική διαχείρισης της πολυπλοκότητας μεγάλων εφαρμογών λογισμικού καθώς βελτιώνει την οργάνωση του κώδικα, την αναγνωσιμότητα και την ευκολία διαχείρισης της εφαρμογής στο σύνολό της.<br />
Στον προγραμματισμό με την C, η διαμέριση τυπικά αφορά τον διαχωρισμό κώδικα σε αρχεία επικεφαλίδων και αρχεία πηγαίου κώδικα. Τα αρχεία επικεφαλίδων περιέχουν δηλώσεις τύπων δεδομένων, συναρτήσεων, μεταβλητών κ.λπ., ενώ τα αρχεία πηγαίου κώδικα περιέχουν τους ορισμούς των δηλώσεων, δηλαδή τις λεπτομέρειες υλοποίησης.<br />
Τα πλεονεκτήματα που προκύπτουν από τη διαμέριση κώδικα είναι πολλά. Πρώτον, επιτρέπουν την επαναχρησιμοποίηση κώδικα καθώς οι συναρτήσεις και οι τύποι δεδομένων μπορούν να δηλώνονται σε αρχεία <span class="p-style">.h</span>, να ορίζονται σε αρχεία <span class="p-style">.c</span> και τα αρχεία <span class="p-style">.h</span> να γίνονται <span class="p-style">include</span> εφόσον απαιτείται σε άλλα αρχεία πηγαίου κώδικα. Με αυτόν τον τρόπο αποτρέπεται η ύπαρξη πολλαπλών αντιγράφων του ίδιου κώδικα και τα προβλήματα που εισάγει όπως ασυνέπεια αντιγράφων, δυσκολία στη διόρθωση κ.λπ. Δεύτερο πλεονέκτημα είναι ότι η διαμέριση κώδικα βελτιώνει τους χρόνους μεταγλώττισης καθώς τα επιμέρους τμήματα κώδικα που με ταγλωττίζονται δεν χρειάζεται να μεταγλωττιστούν ξανά, αν δεν προκύπτει αλλαγή στον κώδικά τους. Τρίτο πλεονέκτημα της διαμέρισης κώδικα είναι ότι βελτιώνει την οργάνωση του κώδικα σε τμήματα (modularity), επιτρέποντας την ανάθεση της ανάπτυξης επιμέρους τμημάτων σε διαφορετικούς προγραμματιστές και την πλοήγηση σε μεγάλα αποθετήρια κώδικα (codebases).</p>
<h2 id="132-c">13.2 Αρχεία επικαφαλίδων και αρχεία πηγαίου κώδικα στη C</h2>
<p>Ένα τυπικό αρχείο επικεφαλίδας περιέχει φρουρούς <span class="p-style">include</span>, δηλώσεις συναρτήσεων, ορισμούς μακροεντολών, τύπων και σταθερών. Αν και μπορεί να γίνει θα πρέπει να αποφεύγεται ο ορισμός συναρτήσεων και μεταβλητών σε αρχεία επικεφαλίδων, που θα πρέπει να γίνονται σε αρχεία πηγαίου κώδικα. Τα αρχεία πηγαίου κώδικα μεταγλωττίζονται σε αρχεία αντικείμενα (object files), που συνδέονται με άλλα αρχεία αντικείμενα έτσι ώστε να δημιουργήσουν το τελικό εκτελέσιμο πρόγραμμα.</p>
<h3 id="1321">13.2.1 Διαχωρισμός διεπαφής και υλοποίησης</h3>
<p>Ο διαχωρισμός διεπαφής και υλοποίησης είναι μια σημαντική έννοια της διαμέρισης κώδικα. Μια διεπαφή (interface) είναι ένα αρχείο επικεφαλίδας που περιέχει δηλώσεις, ενώ η υλοποίηση περιέχεται στο αντίστοιχο αρχείο πηγαίου κώδικα. Πλεονεκτήματα που προκύπτουν από τον διαχωρισμό διεπαφής και υλοποίησης παρατίθενται στη συνέχεια:</p>
<ul>
<li>Eνίσχυση του τμηματικού σχεδιασμού, που επιτρέπει σε κάθε τμήμα κώδικα να αναπτύσσεται, να ελέγχεται και να συντηρείται ανεξάρτητα από τα άλλα.</li>
<li>Μειώνει τη σύζευξη (coupling) ανάμεσα στα επιμέρους τμήματα του κώδικα, με συνέπεια αλλαγές σε ένα τμήμα να επηρεάζουν λιγότερο τα άλλα τμήματα κώδικα.</li>
<li>Βελτίωση της αναγνωσιμότητας του κώδικα, καθώς η διεπαφή μπορεί να θεωρηθεί ως μια υψηλού επιπέδου περιγραφή της λειτουργικότητας, ενώ οι χαμηλού επιπέδου λεπτομέρειες υλοποίησης βρίσκονται «κρυμμένες» μέσα στα αρχεία πηγαίου κώδικα.</li>
<li>Διευκόλυνση της επαναχρησιμοποίησης κώδικα, καθώς άλλα τμήματα κώδικα μπορούν να χρησιμοποιούν τη διεπαφή χωρίς να χρειάζεται να γνωρίζουν τις λεπτομέρειες υλοποίησης. </li>
</ul>
<p>Τα βήματα που ακολουθούνται για τον διαχωρισμό διεπαφής και υλοποίησης και τη δημιουργία ενός τμήματος κώδικα είναι τα ακόλουθα:</p>
<ol>
<li>Ορισμός της διεπαφής: Δήλωση τύπων δεδομένων και συναρτήσεων στο αρχείο επικεφαλίδας.</li>
<li>Υλοποίηση της διεπαφής: Συγγραφή του κώδικα υλοποίησης των συναρτήσεων που δηλώθηκαν στο αρχείο επικεφαλίδας στο αντίστοιχο αρχείο πηγαίου κώδικα.</li>
<li>Έλεγχος του τμήματος κώδικα: Έλεγχος ότι το τμήμα κώδικα (επικεφαλίδα και πηγαίος κώδικας) λειτουργεί όπως πρέπει.</li>
<li>Χρήση του τμήματος κώδικα: Συμπερίληψη του αρχείου επικεφαλίδας σε οποιοδήποτε άλλο τμήμα κώδικα χρειάζεται τη λειτουργικότητα που έχει υλοποιηθεί.</li>
</ol>
<h3 id="1322">13.2.2 Παράδειγμα διαχωρισμού διεπαφής και υλοποίησης</h3>
<p>Στη συνέχεια θα παρουσιαστεί ένα παράδειγμα που υπολογίζει και εμφανίζει τη χιλιομετρική απόσταση μεταξύ πόλεων, πραγματοποιώντας διαχωρισμό διεπαφής και υλοποίησης. Στο παράδειγμα αυτό υπολογίζονται οι χιλιομετρικές αποστάσεις μεταξύ πόλεων που το γεωγραφικό πλάτος και το γεωγραφικό μήκος τους δίνεται στο αρχείο <span class="p-style">geolocations.txt</span>. Ειδικότερα, το αρχείο <span class="p-style">geolocations.txt</span> περιέχει 1 γραμμή ανά πόλη με τις πληροφορίες: όνομα πόλης και χώρα, γεωγραφικό πλάτος, γεωγραφικό μήκος και ήπειρος σε σειρά να χωρίζονται μεταξύ τους με ελληνικά ερωτηματικά. Κατά την εκτέλεση του τελικού προγράμματος η διαδρομή του αρχείου <span class="p-style">geolocations.txt</span> θα περνά ως όρισμα γραμμής εντολών προκειμένου τα δεδομένα του να χρησιμοποιηθούν για τον υπολογισμό των αποστάσεων.</p>
<div class="language-text highlight"><span class="filename">Το αρχείο geolocations.txt</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Athens, Greece;37.983810;23.727539;Europe
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Paris, France;48.856613;2.352222;Europe
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Tokyo, Japan;35.689487;139.691711;Asia
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>Delhi, India;28.704060;77.102493;Asia
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Cairo, Egypt;30.044420;31.235712;Africa
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>Lagos, Nigeria;6.524379;3.379206;Africa
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>New York City, USA;40.712776;-74.005974;North America
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>Mexico City, Mexico;19.432608;-99.133209;North America
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>Rio de Janeiro, Brazil;-22.906847;-43.172897;South America
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>Buenos Aires, Argentina;-34.603683;-58.381557;South America
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>Sydney, Australia;-33.868820;151.209290;Oceania
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>Auckland, New Zealand;-36.848461;174.763336;Oceania
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>McMurdo Station;-77.8419;166.6863;Antarctica
</span></code></pre></div>
<p>Ο κώδικας έχει διαμεριστεί στα ακόλουθα πέντε αρχεία:</p>
<ul>
<li><span class="p-style">ch13_p1_utility.h</span>: Ορίζει τη σταθερά <span class="p-style">PI</span> στην τιμή 3.141592. Περιέχει τη δήλωση της απαρίθμησης <span class="p-style">Continent</span>, της δομής <span class="p-style">geo_city</span> και των συναρτήσεων, <span class="p-style">distance()</span>, <span class="p-style">deg2rad()</span> και <span class="p-style">rad2deg()</span>. H συνάρτηση <span class="p-style">distance()</span> υπολογίζει τη χιλιομετρική απόσταση μεταξύ δύο τοποθεσιών δεδομένου του γεωγραφικού μήκους και πλάτους τους. Οι συναρτήσεις <span class="p-style">deg2rad()</span> και <span class="p-style">rad2deg()</span> έχουν βοηθητικό ρόλο καθώς μετατρέπουν γωνίες από μοίρες σε ακτίνια και από ακτίνια σε μοίρες αντίστοιχα.</li>
<li>
<p class="annotate"><span class="p-style">ch13_p1_utility.c</span>: Περιέχει τις υλοποιήσεις (ορισμούς) των συναρτήσεων που δηλώνονται στο <span class="p-style">ch13_p1_utility.h</span>. Η συνάρτηση <span class="p-style">distance()</span> υλοποιείται χρησιμοποιώντας τον τύπο του
    Haversine (1) που υπολογίζει την απόσταση ανάμεσα σε δύο σημεία στην επιφάνεια μιας σφαίρας.</p>
<ol>
<li><a href="https://www.themathdoctors.org/distances-on-earth-2-the-haversine-formula/" target="_blank">https://www.themathdoctors.org/distances-on-earth-2-the-haversine-formula/</a>  </li>
</ol>
</li>
<li>
<p><span class="p-style">ch13_p1_io.h</span>: Περιέχει τη δήλωση της συνάρτησης <span class="p-style">read_cities()</span> που διαβάζει δεδομένα πόλεων από ένα αρχείο κειμένου και επιστρέφει έναν πίνακα με στοιχεία τύπου <span class="p-style">geo_city</span> καθώς και το πλήθος των πόλεων που διάβασε. Επίσης, ορίζει τη σταθερά <span class="p-style">MAX_CITIES</span> που περιέχει τον μέγιστο αριθμό πόλεων που η συνάρτηση είναι σε θέση να διαβάσει.</p>
</li>
<li><span class="p-style">ch13_p1_io.c</span>: Περιέχει την υλοποίηση της συνάρτησης <span class="p-style">read_cities()</span>.</li>
<li><span class="p-style">ch13_p1_main.c</span>: Είναι το αρχείο οδηγός, που περιέχει τη συνάρτηση <span class="p-style">main()</span> και αποτελεί την αφετηρία εκτέλεσης του προγράμματος. Στο αρχείο αυτό δεσμεύεται η απαιτούμενη μνήμη για τα στοιχεία των πόλεων, συμπληρώνεται με τιμές που διαβάζονται από το αρχείο δεδομένων και υπολογίζονται οι αποστάσεις των πόλεων ανά δύο με τη συνάρτηση <span class="p-style">distance()</span> και εμφανίζονται.</li>
</ul>
<p>Οι κώδικες των αρχείων επικεφαλίδας (κώδικας 13.1 και κώδικας 13.2) παρουσιάζονται στη συνέχεια.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.1: ch13_p1_utility.h - αρχείο επικεφαλίδας που ορίζει μία σταθερά (με #define) και δηλώνει μια απαρίθμηση, μια δομή και τρεις συναρτήσεις.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cp">#ifndef CH13_P1_UTILITY_H</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="cp">#define CH13_P1_UTILITY_H</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="cp">#define PI 3.141592</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">  </span><span class="n">EUROPE</span><span class="p">,</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="n">ASIA</span><span class="p">,</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">  </span><span class="n">AFRICA</span><span class="p">,</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">  </span><span class="n">NORTH_AMERICA</span><span class="p">,</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">  </span><span class="n">SOUTH_AMERICA</span><span class="p">,</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">  </span><span class="n">OCEANIA</span><span class="p">,</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">  </span><span class="n">ANTARCTICA</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="p">}</span><span class="w"> </span><span class="n">Continent</span><span class="p">;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">lat</span><span class="p">;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">lon</span><span class="p">;</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">city_name</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">  </span><span class="n">Continent</span><span class="w"> </span><span class="n">continent</span><span class="p">;</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="p">}</span><span class="w"> </span><span class="n">geo_city</span><span class="p">;</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22"></a>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="kt">double</span><span class="w"> </span><span class="nf">distance</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">lat1</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lon1</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lat2</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lon2</span><span class="p">);</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="kt">double</span><span class="w"> </span><span class="nf">deg2rad</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">deg</span><span class="p">);</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="kt">double</span><span class="w"> </span><span class="nf">rad2deg</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">rad</span><span class="p">);</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.2: ch13_p1_io.h - αρχείο επικεφαλίδας που ορίζει μια σταθερά (με #define) και δηλώνει μια συνάρτηση.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cp">#ifndef CH13_P1_IO_H</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="cp">#define CH13_P1_IO_H</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_utility.h&quot;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="cp">#define MAX_CITIES 1000</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="kt">void</span><span class="w"> </span><span class="nf">read_cities</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">geo_city</span><span class="w"> </span><span class="o">*</span><span class="n">cities</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">num_records</span><span class="p">);</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθούν τα αρχεία πηγαίου κώδικα 13.3 και 13.4, τα οποία υλοποιούν τις δηλώσεις συναρτήσεων που περιέχονται στα αντίστοιχα αρχεία επικεφαλίδων.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.3: ch13_p1_utility.c - αρχείο πηγαίου κώδικα που περιέχει ορισμούς των τριών συναρτήσεων που δηλώθηκαν στο ch13_p1_utility.h.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_utility.h&quot;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="kt">double</span><span class="w"> </span><span class="nf">distance</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">lat1</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lon1</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lat2</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lon2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">lat1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">lat2</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">lon1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">lon2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">theta</span><span class="p">,</span><span class="w"> </span><span class="n">dist</span><span class="p">;</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="n">theta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lon2</span><span class="p">;</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat1</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat2</span><span class="p">))</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">           </span><span class="n">cos</span><span class="p">(</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat1</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat2</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">theta</span><span class="p">));</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="n">dist</span><span class="p">);</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rad2deg</span><span class="p">(</span><span class="n">dist</span><span class="p">);</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">    </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.853159616</span><span class="p">;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dist</span><span class="p">;</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="p">}</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18"></a>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="kt">double</span><span class="w"> </span><span class="nf">deg2rad</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">deg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">deg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">180</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="kt">double</span><span class="w"> </span><span class="nf">rad2deg</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">rad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">rad</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">180</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">PI</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.4: ch13_p1_io.c - αρχείο πηγαίου κώδικα που περιέχει ορισμούς της συνάρτησης που δηλώθηκαν στο ch13_p1_io.h.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span>
<span class="normal"><a href="#__codelineno-4-47">47</a></span>
<span class="normal"><a href="#__codelineno-4-48">48</a></span>
<span class="normal"><a href="#__codelineno-4-49">49</a></span>
<span class="normal"><a href="#__codelineno-4-50">50</a></span>
<span class="normal"><a href="#__codelineno-4-51">51</a></span>
<span class="normal"><a href="#__codelineno-4-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_io.h&quot;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_utility.h&quot;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">read_cities</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">geo_city</span><span class="w"> </span><span class="o">*</span><span class="n">cities</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">num_cities</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">  </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">fp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="p">);</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fp</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error opening file %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">line</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">fgets</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">line</span><span class="p">),</span><span class="w"> </span><span class="n">fp</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX_CITIES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strtok</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;;&quot;</span><span class="p">);</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">    </span><span class="n">strncpy</span><span class="p">(</span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">city_name</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="p">,</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">            </span><span class="k">sizeof</span><span class="p">(</span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">city_name</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;;&quot;</span><span class="p">);</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">    </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23"></a>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">    </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;;&quot;</span><span class="p">);</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">    </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">token</span><span class="p">);</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26"></a>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Europe&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EUROPE</span><span class="p">;</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Asia&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ASIA</span><span class="p">;</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Africa&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AFRICA</span><span class="p">;</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;North America&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NORTH_AMERICA</span><span class="p">;</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;South America&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SOUTH_AMERICA</span><span class="p">;</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Oceania&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OCEANIA</span><span class="p">;</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Antarctica&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="w">      </span><span class="n">cities</span><span class="p">[</span><span class="n">count</span><span class="p">].</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ANTARCTICA</span><span class="p">;</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42"></a>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="w">    </span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="w">  </span><span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46"></a>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">MAX_CITIES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Warning: reached maximum number of records</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50"></a>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51"></a><span class="w">  </span><span class="o">*</span><span class="n">num_cities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Το κύριο πρόγραμμα είναι το <span class="p-style">ch13_p1_main.c</span> (κώδικας 13.5) και αποτελεί τον «οδηγό εκτέλεσης» του προγράμματος.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.5: ch13_p1_main.c - αρχείο πηγαίου κώδικα που περιέχει τη συνάρτηση main() και αποτελεί το σημείο έναρξης εκτέλεσης του προγράμματος.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_io.h&quot;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ch13_p1_utility.h&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Error: a filename must be provided as a command line argument.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">  </span><span class="n">geo_city</span><span class="w"> </span><span class="o">*</span><span class="n">cities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">MAX_CITIES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">geo_city</span><span class="p">));</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cities</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Error allocating memory for records</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">N</span><span class="p">;</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">  </span><span class="n">read_cities</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">cities</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">N</span><span class="p">);</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21"></a>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">j</span><span class="p">)</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="w">        </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">      </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">          </span><span class="n">distance</span><span class="p">(</span><span class="n">cities</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">cities</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">cities</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">cities</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">lon</span><span class="p">);</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s to %s distance %.1fkm</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cities</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">city_name</span><span class="p">,</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">             </span><span class="n">cities</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">city_name</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32"></a>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33"></a><span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">cities</span><span class="p">);</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><i>Μεταγλώττιση από τη γραμμή εντολών</i> Αν και τα πέντε αρχεία κώδικα βρίσκονται στον ίδιο κατάλογο, η ακόλουθη εντολή μεταγλώττισης και σύνδεσης θα παράξει το αρχείο εκτελέσιμου κώδικα ch13_p1_main.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$ gcc ch13_p1_utility.c ch13_p1_io.c ch13_p1_main.c ‐o ch13_p1_main
</span></code></pre></div>
<p>Η εκτέλεση του προγράμματος, εφόσον το αρχείο <span class="p-style">geolocations.txt</span> βρίσκεται στον ίδιο κατάλογο με το εκτελέσιμο θα εμφανίσει τα ακόλουθα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$ ./ch13_p1_main geolocations.txt
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Athens, Greece to Paris, France distance 2095.7km
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>...
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>McMurdo Station to Auckland , New Zealand distance 4574.3km
</span></code></pre></div>
<p>Τα παραπάνω αρχεία θα μπορούσαν να βρίσκονται για καλύτερη οργάνωση σε υποκαταλόγους όπως φαίνεται στο Σχήμα 13.1 στη συνέχεια:<br />
Τότε, η εντολή μεταγλώττισης θα έπρεπε να τροποποιηθεί όπως στη συνέχεια. Προκειμένου να εντοπιστούν τα αρχεία επικεφαλίδων στη νέα τους θέση χρησιμοποιείται κατά τη μεταγλώττιση ο διακόπτης <span class="p-style">‐Ι</span> ακολουθούμενος από το όνομα του υποκαταλόγου, <span class="p-style">‐Iinc</span>.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$ gcc src/ch13_p1_utility.c src/ch13_p1_io.c src/ch13_p1_main.c ‐Iinc ‐o ch13_p1_main
</span></code></pre></div>
<p>Η εντολή εκτέλεσης του προγράμματος θα έπρεπε επίσης να τροποποιηθεί έτσι ώστε να δείχνει τη σωστή διαδρομή προς το αρχείο δεδομένων <span class="p-style">geolocations.txt</span>.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$ ./ch13_p1_main res/geolocations.txt
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Athens, Greece to Paris, France distance 2095.7km
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>...
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>McMurdo Station to Auckland , New Zealand distance 4574.3km
</span></code></pre></div>
<p><a class="glightbox" href="../src/images/ch13_p1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Σχήμα 13.1" src="../src/images/ch13_p1.png" /></a></p>
<div style="text-align: center;"><b>Σχήμα 13.1:</b><i>Ιεραρχία καταλόγων για αποθήκευση πηγαίου κώδικα και αρχείων επικεφαλίδων για το παράδειγμα ch13_p1.</i></div>

<h2 id="133">13.3 Δημιουργία βιβλιοθηκών</h2>
<p>Μια βιβλιοθήκη είναι μια συλλογή από προ-μεταγλωττισμένες συναρτήσεις και σύμβολα που μπορούν να χρησιμοποιηθούν από προγράμματα τόσο κατά τη μεταγλώττιση όσο και κατά την εκτέλεσή τους. Μια βιβλιοθήκη μπορεί να συνδέεται στατικά ή δυναμικά με ένα πρόγραμμα και μπορεί να περιέχει διάφορους πόρους που χρησιμοποιούνται από το πρόγραμμα. Οι δύο κατηγορίες βιβλιοθηκών είναι οι στατικές βιβλιοθήκες και
οι δυναμικές βιβλιοθήκες.<br />
Μια στατική βιβλιοθήκη είναι μια συλλογή από object files που συνδέονται απευθείας στο εκτελέσιμο ενός προγράμματος κατά τον χρόνο μεταγλώττισης. Ένα πλεονέκτημα των στατικών βιβλιοθηκών είναι ότι δεν απαιτούν διανομή επιπλέον αρχείων έτσι ώστε το πρόγραμμα να μπορεί να εκτελεστεί, αλλά οι συναρτήσεις και τα σύμβολα που ορίζονται στις στατικές βιβλιοθήκες ενσωματώνονται στο ίδιο το εκτελέσιμο του προγράμματος.<br />
Από την άλλη μεριά, μια δυναμική βιβλιοθήκη είναι μια κοινόχρηστη βιβλιοθήκη η οποία φορτώνεται από το πρόγραμμα κατά την εκτέλεσή του. Οι δυναμικές βιβλιοθήκες μεταγλωττίζονται ξεχωριστά από το πρόγραμμα και αποθηκεύονται ως αρχεία με επέκταση <span class="p-style">.so</span> σε Linux/Unix συστήματα ή ως αρχεία <span class="p-style">.dll</span> σε συστήματα Windows ή ως αρχεία <span class="p-style">.dylib</span> σε συστήματα MacOS. Κατά τον χρόνο εκτέλεσης το πρόγραμμα φορτώνει τη δυναμική βιβλιοθήκη και επιλύει με αυτόν τον τρόπο αναφορές σε συναρτήσεις και σύμβολα που ορίζονται στη δυναμική βιβλιοθήκη. Πλεονεκτήματα των δυναμικών βιβλιοθηκών είναι ότι πολλά επιμέρους προγράμματα μπορούν να μοιράζονται το ίδιο αντίγραφο μιας δυναμικής βιβλιοθήκης και ότι εν γένει είναι μικρότερες από τις αντίστοιχες στατικές βιβλιοθήκες.<br />
Οι βιβλιοθήκες στη C είναι ένας ισχυρός μηχανισμός οργάνωσης κώδικα σε επαναχρησιμοποιήσιμη μορφή έτσι ώστε να προωθείται η τμηματοποίηση του. Οι βιβλιοθήκες μπορούν να διατίθενται και ως ξεχωριστά πακέτα, και με αυτόν τον τρόπο να διευκολύνεται ο διαμοιρασμός τους και η ενσωμάτωσή τους σε εφαρμογές.</p>
<h3 id="1331">13.3.1 Παράδειγμα στατικής βιβλιοθήκης</h3>
<p>Στο παράδειγμα που ακολουθεί θα δημιουργηθεί μια στατική βιβλιοθήκη με όνομα <span class="p-style">libutility.a</span> για τα περιεχόμενα του αρχείου πηγαίου κώδικα <span class="p-style">ch13_p1_utility.c</span> της παραγράφου 13.2.2. Στη συνέχεια η βιβλιοθήκη αυτή θα συνδεθεί με τον υπόλοιπο κώδικα του παραδείγματος. Παρατηρήστε ότι η επέκταση του ονόματος της βιβλιοθήκης είναι <span class="p-style">.a</span> για Linux/UNIX και MacOS, ενώ είναι <span class="p-style">.lib</span> για Windows. Τα βήματα που ακολουθούνται είναι: </p>
<ul>
<li>Μεταγλώττιση του <span class="p-style">ch13_p1_utility.c</span> σε object αρχείο χρησιμοποιώντας την εντολή <span class="p-style">gcc</span> και τον διακόπτη <span class="p-style">‐c</span>.
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$ gcc ‐c ch13_p1_utility.c ‐o ch13_p1_utility.o
</span></code></pre></div></li>
<li>Δημιουργία του αρχείου της στατικής βιβλιοθήκης από το object αρχείο με τη χρήση της εντολής <span class="p-style">ar</span>.
    Το όνομα της εντολής προκύπτει από τα δύο πρώτα γράμματα της λέξης archive (αρχειοθέτηση).
    <div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$ ar rcs libutility.a ch13_p1_utility.o
</span></code></pre></div>
    Οι διακόπτες <span class="p-style">r</span>, <span class="p-style">c</span> και <span class="p-style">s</span> κατά την κλήση της εντολής <span class="p-style">ar</span> σημαίνουν για το μεν <span class="p-style">r</span> ότι πρόκειται να αντικατασταθούν ή να προστεθούν αρχεία στο αρχείο που δημιουργείται, για το <span class="p-style">c</span> ότι δεν θα εμφανίζονται κατά την εκτέλεση του <span class="p-style">ar</span> διαγνωστικά μηνύματα και για το <span class="p-style">s</span> ότι θα γίνει ενημέρωση της δομής του πίνακα συμβόλων που έχει ως στόχο τη «διευκόλυνση» του συνδέτη στο να εντοπίζει σύμβολα που χρησιμοποιούνται στο πρόγραμμα.</li>
<li>Μεταγλώττιση του προγράμματος συνδέοντας το αρχείο της στατικής βιβλιοθήκης. Ο διακόπτης <span class="p-style">‐L</span> ακολουθείται από τη διαδρομή υποκαταλόγων στην οποία βρίσκεται η στατική βιβλιοθήκη και ο διακόπτης <span class="p-style">‐l</span> ακολουθείται από το όνομα της στατικής βιβλιοθήκης χωρίς το πρόθεμα <span class="p-style">lib</span> του ονόματος, δηλαδή αν η βιβλιοθήκη ονομάζεται <span class="p-style">libutility.a</span> και βρίσκεται στον τρέχοντα κατάλογο, τότε η εντολή μεταγλώττισης συμπληρώνεται με <span class="p-style">‐L</span>. και <span class="p-style">‐lutility</span> όπως και στη συνέχεια:
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$ gcc ch13_p1_io.c ch13_p1_main.c ‐L. ‐lutility ‐o ch13_p1_main_s
</span></code></pre></div></li>
</ul>
<p class="annotate">Το εκτελέσιμο αρχείο δεν απαιτεί την ύπαρξη στον ίδιο φάκελο ή σε φάκελο που να είναι στο PATH (1), της στατικής βιβλιοθήκης για την εκτέλεσή του. Συνεπώς, αν μεταφερθεί σε έναν νέο κατάλογο μαζί με το αρχείο δεδομένων, το πρόγραμμα θα εκτελεστεί χωρίς πρόβλημα με την ακόλουθη εντολή:</p>
<ol>
<li>Το PATH είναι μια μεταβλητή περιβάλλοντος που καθορίζει τους καταλόγους στους οποίους το σύστημα αναζητά εκτελέσιμα αρχεία.  </li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>$ ./ch13_p1_main_s geolocations.txt
</span></code></pre></div>
<h3 id="1332">13.3.2 Παράδειγμα δυναμικής βιβλιοθήκης</h3>
<p>Το παράδειγμα της προηγούμενης παραγράφου υλοποιείται ξανά, με τη δημιουργία και χρήση δυναμικής βιβλιοθήκης αυτήν τη φορά. Με τις εντολές που ακολουθούν θα δημιουργηθεί αρχικά η δυναμική βιβλιοθήκη <span class="p-style">libutility.so</span> σε Linux/UNIX (<span class="p-style">libutility.dll</span> σε Windows, <span class="p-style">libutility.dylib</span> σε macOS) για το <span class="p-style">ch13_p1_utility.c</span> και θα ακολουθήσει σύνδεσή της με τον υπόλοιπο κώδικα του παραδείγματος, με τη σημαντική διαφορά ότι πλέον ο object κώδικας της βιβλιοθήκης θα φορτώνεται κατά τον χρόνο εκτέλεσης.<br />
Τα βήματα είναι τα ακόλουθα:</p>
<ul>
<li>
<p>Μεταγλώττιση του <span class="p-style">ch13_p1_utility.c</span> σε διαμοιραζόμενο object αρχείο καλώντας τον μεταγλωττιστή <span class="p-style">gcc</span> με τον διακόπτη <span class="p-style">‐shared</span>.
    <div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$ gcc ‐shared ‐o libutility.so ch13_p1_utility.o
</span></code></pre></div>
    Η εντολή αυτή δημιουργεί το αρχείο <span class="p-style">libutility.so</span> που περιέχει τα σύμβολα και τις υλοποιήσεις των συναρτήσεων που έχουν δηλωθεί στο αρχείο <span class="p-style">ch13_p1_utility.h</span>.</p>
</li>
<li>
<p>Μεταγλώττιση του προγράμματος συνδέοντας το αρχείο της δυναμικής βιβλιοθήκης. Για τους διακόπτες <span class="p-style">‐L</span> και <span class="p-style">‐l</span> ισχύει ό,τι και στην περίπτωση της στατικής βιβλιοθήκης. Αξίζει να σημειωθεί ότι δεν συμπληρώνεται στην εντολή μεταγλώττισης στο όνομα της δυναμικής βιβλιοθήκης η επέκτασή του (<span class="p-style">.so</span> ή <span class="p-style">.dll</span> ή <span class="p-style">.dylib</span> ανάλογα με το λειτουργικό σύστημα).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$ gcc ch13_p1_io.c ch13_p1_main.c ‐L. ‐lutility ‐o ch13_p1_main_d
</span></code></pre></div>
</li>
</ul>
<p>Αν το εκτελέσιμο αρχείο του προγράμματος μεταφερθεί σε έναν νέο κατάλογο και επιχειρηθεί από εκεί η εκτέλεσή του, τότε θα εμφανιστεί μήνυμα σφάλματος που θα αναφέρει ότι το αρχείο δυναμικής βιβλιοθήκης <span class="p-style">libutility.so</span> δεν βρέθηκε.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$ ./ch13_p1_main_d geolocations.txt
</span></code></pre></div>
<p>Αν στον ίδιο φάκελο μεταφερθεί και το αρχείο της δυναμικής βιβλιοθήκης τότε η εκτέλεση του προγράμματος θα γίνει κανονικά.</p>
<h2 id="134-make">13.4 Οργάνωση μεταγλώττισης με το make</h2>
<p>Το <span class="p-style">make</span> <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> είναι ένα build automation tool, δηλαδή ένα εργαλείο αυτοματοποίησης δημιουργίας εκτελέσιμων προγραμμάτων και βιβλιοθηκών από αρχεία πηγαίου κώδικα. Το <span class="p-style">make</span> διαβάζει το makefile, ένα ειδικά διαμορφωμένο αρχείο που περιέχει κανόνες καθορισμού του τρόπου που θα γίνεται η μεταγλώττιση και σύνδεση του προγράμματος. Εντοπίζει τμήματα του προγράμματος που πρέπει να μεταγλωττιστούν ξανά, και εξετάζοντας τη χρονική στιγμή τελευταίας τροποποίησής τους, παραλείπει τμήματα που η εκ νέου μεταγλώττιση δεν απαιτείται. Με αυτόν τον τρόπο μειώνει τον χρόνο και εξοικονομεί υπολογιστικούς πόρους που θα απαιτούνταν για την από την αρχή δημιουργία του εκτελέσιμου προγράμματος, κάτι που είναι ιδιαίτερα χρήσιμο ειδικά σε προγράμματα με πολλά επιμέρους αρχεία πηγαίου κώδικα που διατηρούν πολύπλοκες εξαρτήσεις μεταξύ τους. Ένα επιπλέον πλεονέκτημα του <span class="p-style">make</span>, είναι ότι απαλλάσσει τον προγραμματιστή από την ανάγκη επαναλαμβανόμενης πληκτρολόγησης μακροσκελών εντολών μεταγλώττισης και σύνδεσης, ενώ ταυτόχρονα καταγράφει και τεκμηριώνει τα βήματα που απαιτεί η διαδικασία παραγωγής του τελικού εκτελέσιμου. <br />
Θα πρέπει να σημειωθεί ότι το <span class="p-style">make</span> δεν χρησιμοποιείται μόνο για μεταγλώττιση κώδικα και δημιουργία εκτελέσιμων ή βιβλιοθηκών στη γλώσσα C ή σε άλλες μεταγλωττιζόμενες γλώσσες όπως η C++ και η Fortran. Πρόκειται για ένα εργαλείο που βρίσκει χρήση σε πολλά σενάρια αυτοματοποίησης διαδικασιών όπως στην οργάνωση των εργασιών που απαιτούνται για τη δημιουργία ιστοτόπων (π.χ. αντιγραφή αρχείων σε καταλόγους, ελαχιστοποίηση μεγέθους αρχείων Javascript και CSS, βελτιστοποίηση εικόνων κ.ά.), στην οργάνωση σειράς εργασιών (pipelines) στην επιστήμη δεδομένων, στη δημιουργία τεκμηρίωσης σε μορφή HTML, PDF ή EPUB από αρχεία markdown κ.ά. Καλές πηγές εκμάθησης των δυνατοτήτων του <span class="p-style">make</span> είναι το <a href="https://makefiletutorial.com/" target="_blank">https://makefiletutorial.com/</a> και το <a href="https://makefile.site/" target="_blank">https://makefile.site/</a>, ενώ υπάρχουν βιβλία όπως το “Managing Projects with GNU Make: The Power of GNU Make for Building Anything” του Robert Mecklenburg <sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> που εξετάζουν τις δυνατότητες του <span class="p-style">make</span> σε βάθος.</p>
<h3 id="1341-makefiles">13.4.1 Παραδείγματα με makefiles</h3>
<p>Τα makefiles αποτελούνται από κανόνες. Ένας κανόνας έχει 3 μέρη, τον στόχο (target), τη λίστα των προαπαιτούμενων (prerequisites), και εντολές (commands) όπως στη συνέχεια.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>στόχος: προαπαιτούμενα
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>εντολές
</span></code></pre></div>
<p>Ο στόχος διαχωρίζεται από τα προαπαιτούμενα με άνω-κάτω τελεία ενώ καθεμία από τις εντολές που ακολουθούν γράφεται σε νέα γραμμή ξεκινώντας ένα tab δεξιότερα από την αρχή της γραμμής. Όταν το <span class="p-style">make</span> κληθεί να αποτιμήσει έναν κανόνα, ξεκινά εξετάζοντας τα προαπαιτούμενα και αποτιμά πρώτα κάθε προαπαιτούμενο που έχει τον δικό του κανόνα. Οι κανόνες τοποθετούνται στο makefile από το γενικότερο προς τον ειδικότερο και συνήθως ο πρώτος κανόνας έχει στόχο με όνομα <span class="p-style">all</span>. Είναι σύνηθες κάθε στόχος να αναπαριστά ένα αρχείο, ενώ οι στόχοι που δεν αναπαριστούν αρχεία είναι οι λεγόμενοι ψεύτικοι (phony) στόχοι.<br />
Οι βασικές δυνατότητες του <span class="p-style">make</span> θα παρουσιαστούν σταδιακά στη συνέχεια, σε ένα παράδειγμα με τρία αρχεία, το <span class="p-style">ch13_p2_main.c</span> (κώδικας 13.6), το <span class="p-style">ch13_p2_geom.h</span> (κώδικας 13.7) και το <span class="p-style">ch13_p2_geom.c</span> (κώδικας 13.8), που αναπαριστούν το πρόγραμμα οδηγό, ένα αρχείο επικεφαλίδας και ένα αρχείο με την υλοποίηση του κώδικα της συνάρτησης που δηλώνεται στο αρχείο επικεφαλίδας, αντίστοιχα.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.6: ch13_p2_main.c - πρόγραμμα οδηγός.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ch13_p2_geom.h&gt;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">};</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">  </span><span class="n">point</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">6.0</span><span class="p">,</span><span class="w"> </span><span class="mf">8.0</span><span class="p">};</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">);</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;The distance between (%.1f, %.1f) &quot;</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">         </span><span class="s">&quot;and (%.1f, %.1f) is %.1f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">         </span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.7: ch13_p2_geom.h - αρχείο επικεφαλίδας.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span>
<span class="normal"><a href="#__codelineno-19-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="p">}</span><span class="w"> </span><span class="n">point</span><span class="p">;</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="kt">double</span><span class="w"> </span><span class="nf">distance</span><span class="p">(</span><span class="n">point</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">p2</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 13.8: ch13_p2_geom.c - αρχείο πηγαίου κώδικα.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span>
<span class="normal"><a href="#__codelineno-20-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ch13_p2_geom.h&gt;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="kt">double</span><span class="w"> </span><span class="nf">distance</span><span class="p">(</span><span class="n">point</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">dy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dy</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dy</span><span class="p">);</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η μεταγλώττιση του κώδικα γίνεται με την ακόλουθη εντολή. Παρατηρήστε τον διακόπτη <span class="p-style">‐Ι</span> ακολουθούμενο από την τελεία που προσθέτει τον τρέχοντα κατάλογο στους καταλόγους όπου αναζητούνται τα αρχεία επικεφαλίδων. Εναλλακτικά, θα μπορούσε να μην είχε χρησιμοποιηθεί ο διακόπτης <span class="p-style">‐Ι</span> και το <span class="p-style">ch13_p2_geom.h</span> να γινόταν <span class="p-style">include</span> με διπλά εισαγωγικά στα αρχεία πηγαίου κώδικα.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$ gcc ch13_p2_geom.c ch13_p2_main.c ‐o ch13_p2_main ‐I. ‐lm
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>$ ./ch13_p2_main
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>The distance between (3.0, 4.0) and (6.0, 8.0) is 5.0
</span></code></pre></div>
<p>Στην εντολή μεταγλώττισης συμπεριλήφθηκε και ο διακόπτης ‐lm προκειμένου να συνδεθεί το πρόγραμμα που μεταγλωττίζεται με την πρότυπη βιβλιοθήκη μαθηματικών της γλώσσας.</p>
<p><i>Πρώτο makefile</i> Ένα πρώτο απλό makefile περιέχει αυτούσια την εντολή μεταγλώττισης που αναφέρθηκε παραπάνω, όπως φαίνεται στον κώδικα 13.9.</p>
<div class="language-text highlight"><span class="filename">Κώδικας 13.9: ch13_p2_makefile1.mk - 1η έκδοση του makefile με έναν στόχο και απλή παράθεση της εντολής μεταγλώττισης που θα δινόταν από τη γραμμή εντολών για τη μεταγλώττιση των αρχείων του πηγαίου κώδικα.</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a> ch13_p2_main: ch13_p2_main.c ch13_p2_geom.h ch13_p2_geom.c
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    gcc ch13_p2_main.c ch13_p2_geom.c -o ch13_p2_main -I. -lm
</span></code></pre></div>
<p>Αν στο αρχείο makefile έχει δοθεί το όνομα <span class="p-style">Makefile</span> ή <span class="p-style">makefile</span>, τότε απλά η παράθεση της εντολής <span class="p-style">make</span> θα χρησιμοποιήσει ως είσοδο αυτό το αρχείο. Αν το αρχείο έχει διαφορετικό όνομα τότε θα πρέπει να χρησιμοποιηθεί ο διακόπτης <span class="p-style">‐f</span> για να προσδιοριστεί το όνομα του αρχείου makefile όπως στη συνέχεια:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>$ make ‐f ch13_p2_makefile1.mk
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>gcc ch13_p2_main.c ch13_p2_geom.c ‐o ch13_p2_main ‐I. ‐lm
</span></code></pre></div>
<p>Το πλεονέκτημα της χρήσης του <span class="p-style">make</span> εδώ είναι ότι δεν χρειάζεται να πληκτρολογείται η εντολή μεταγλώττισης κάθε φορά που πρέπει να μεταγλωττιστεί εκ νέου ο κώδικας. Επιπλέον, το περιεχόμενο του makefile λειτουργεί ως υπενθύμιση για το ποια είναι η εντολή μεταγλώττισης.  </p>
<p><i>Δεύτερο makefile</i> Η μεταγλώττιση των αρχείων πηγαίου κώδικα έγινε με μια εντολή στο προηγούμενο παράδειγμα, αλλά μπορεί να σπάσει στις ακόλουθες επιμέρους εντολές με τις δύο πρώτες να μεταγλωττίζουν τον κώδικα των <span class="p-style">.c</span> αρχείων σε δύο αρχεία αντικείμενου κώδικα και με την τρίτη εντολή να συνδέει τα αρχεία αντικείμενου κώδικα στο αρχείο εκτελέσιμου κώδικα. Αυτό δίνει το πλεονέκτημα της μεταγλώττισης μόνο του ενός αρχείου πηγαίου κώδικα αν αλλάξει μόνο αυτό και τη σύνδεση των αρχείων αντικείμενων για τη δημιουργία του νέου τελικού εκτελέσιμου προγράμματος.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>$ gcc ‐c ch13_p2_geom.c ‐o ch13_p2_geom.o ‐I.
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>$ gcc ‐c ch13_p2_main.c ‐o ch13_p2_main.o ‐I.
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>$ gcc ch13_p2_geom.o ch13_p2_main.o ‐o ch13_p2_main ‐lm
</span></code></pre></div>
<p>Η διαδικασία ξεχωριστής μεταγλώττισης κάθε αρχείου πηγαίου κώδικα μπορεί να γίνει με το ακόλουθο makefile (κώδικας 13.10):</p>
<div class="language-text highlight"><span class="filename">Κώδικας 13.10: ch13_p2_makefile2.mk - 2η έκδοση του makefile που εκτελεί ξεχωριστή μεταγλώττιση των αρχείων πηγαίου κώδικα.</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>CC=gcc
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>CFLAGS=-I.
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>LDLIBS=-lm
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>TARGET=ch13_p2_main
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>all:ch13_p2_geom.o ch13_p2_main.o
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>    $(CC) ch13_p2_geom.o ch13_p2_main.o -o $(TARGET) $(LDLIBS)
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>ch13_p2_geom.o:ch13_p2_geom.c ch13_p2_geom.h 
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>    $(CC) -c ch13_p2_geom.c -o ch13_p2_geom.o $(CFLAGS)
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>ch13_p2_main.o:ch13_p2_main.c ch13_p2_geom.h
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>    $(CC) -c ch13_p2_main.c -o ch13_p2_main.o $(CFLAGS)
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>clean:
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>    rm -rf $(TARGET) *.o
</span></code></pre></div>
<p>Τώρα, στο makefile υπάρχουν ξεχωριστοί στόχοι στη γραμμή 9 και 12 για την παραγωγή των αντικειμένων προγραμμάτων για το <span class="p-style">ch13_p2_geom.c</span> και το <span class="p-style">ch13_p2_main.c</span>, αντίστοιχα. Επιπλέον, σε αυτήν τη δεύτερη εκδοχή του αρχείου makefile, ορίζονται οι μεταβλητές <span class="p-style">CC</span>, <span class="p-style">CFLAGS</span>, <span class="p-style">LDLIBS</span> και <span class="p-style">TARGET</span>. Η μεταβλητή <span class="p-style">CC</span> περιέχει το όνομα του μεταγλωττιστή που σε αυτήν την περίπτωση είναι ο <span class="p-style">gcc</span>, αλλά θα μπορούσε να είναι και οποιοσδήποτε άλλος εγκατεστημένος στο σύστημα μεταγλωττιστής της C, όπως ο <span class="p-style">clang</span>. Η μεταβλητή <span class="p-style">CFLAGS</span> περιέχει διακόπτες που θα χρησιμοποιηθούν κατά τη μεταγλώττιση (εδώ είναι το <span class="p-style">‐Ι</span>.). Η μεταβλητή <span class="p-style">LDLIBS</span> περιέχει τις βιβλιοθήκες που χρησιμοποιούνται κατά τη σύνδεση (εδώ είναι η βιβλιοθήκη για μαθηματικές συναρτήσεις <span class="p-style">libm</span>, οπότε η σύνδεση γίνεται με το <span class="p-style">‐lm</span>). Τέλος, η μεταβλητή <span class="p-style">TARGET</span> περιέχει το όνομα του εκτελέσιμου που θα παραχθεί. Οι αναφορές στις μεταβλητές στις εντολές των κανόνων του makefile γίνονται με το όνομα της κάθε μεταβλητής μέσα σε παρενθέσεις, με το <span class="p-style">&#36;</span> να προηγείται, (π.χ. <span class="p-style">$(CC)</span> για τη μεταβλητή <span class="p-style">CC</span>). Επιπλέον, έχουν προστεθεί και δύο στόχοι, που συχνά συναντώνται σε makefiles, ο στόχος <span class="p-style">all</span> και ο στόχος <span class="p-style">clean</span>. Ο στόχος <span class="p-style">all</span> ως πρώτος στόχος από την κορυφή του αρχείου είναι ο στόχος που θα εκτελεστεί όταν θα κληθεί η <span class="p-style">make</span>. Θα εξεταστούν τα προαπαιτούμενα αρχεία και αν δεν είναι ενημερωμένα, θα προηγηθεί ο κανόνας που τα έχει ως στόχο έτσι ώστε να εκτελεστεί πρώτα αυτός και να ενημερωθούν. Έτσι η εκτέλεση του <span class="p-style">make</span> με το νέο makefile θα δώσει τα ακόλουθα αποτελέσματα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>$ make ‐f ch13_p2_makefile2.mk
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>$ gcc ‐c ch13_p2_geom.c ‐o ch13_p2_geom.o ‐I.
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>$ gcc ‐c ch13_p2_main.c ‐o ch13_p2_main.o ‐I.
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>$ gcc ch13_p2_geom.o ch13_p2_main.o ‐o ch13_p2_main ‐lm
</span></code></pre></div>
<p>Αν στη συνέχεια γίνει μια αλλαγή στον πηγαίο κώδικα του <span class="p-style">ch13_p2_main.c</span> και επαναληφθεί η εκτέλεση του <span class="p-style">make</span>, τότε θα παραλειφθούν μεταγλωττίσεις που είναι περιττό να ξαναγίνουν. Το ίδιο θα συμβεί και αν διαγραφεί το αρχείο <span class="p-style">ch13_p2_main.o</span>.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>$ make ‐f ch13_p2_makefile2.mk
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>$ gcc ‐c ch13_p2_geom.c ‐o ch13_p2_geom.o ‐I.
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>$ gcc ch13_p2_geom.o ch13_p2_main.o ‐o ch13_p2_main ‐lm
</span></code></pre></div>
<p>Ο στόχος <span class="p-style">clean</span>, όπως και κάθε άλλος στόχος, μπορεί να εκτελεστεί παραθέτοντας το όνομά του στο τέλος της εντολής make, όπως στη συνέχεια:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$ make ‐f ch13_p2_makefile2.mk clean
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>rm ‐rf ch13_p2_main *.o
</span></code></pre></div>
<p>Ο στόχος αυτός διαγράφει όλα τα αρχεία με επέκταση <span class="p-style">.o</span> καθώς και το τελικό εκτελέσιμο.</p>
<p><i>Τρίτο makefile</i> Η τρίτη εκδοχή του αρχείου makefile (κώδικας 13.11) χρησιμοποιεί επιπλέον δυνατότητες του <span class="p-style">make</span>. Έχει την ίδια λειτουργικότητα με την προηγούμενη εκδοχή, αλλά ορίζει μια επιπλέον μεταβλητή, χρησιμοποιεί ειδικά σύμβολα συντομεύσεων όπως το <span class="p-style">&#36;@</span> και το <span class="p-style">&#36;^</span>, και σηματοδοτεί ότι οι στόχοι <span class="p-style">all</span> και <span class="p-style">clean</span> είναι PHONY, δηλαδή στόχοι που δεν αντιστοιχούν σε αρχεία, κάτι το οποίο δεν συμβαίνει με τους υπόλοιπους στόχους. Η νέα μεταβλητή <span class="p-style">INCLUDE</span> περιέχει τη διαδρομή στην οποία θα αναζητηθούν τα αρχεία επικεφαλίδων, ενώ η μεταβλητή <span class="p-style">CFLAGS</span> έχει πλέον διακόπτες που ορίζουν ότι θα εντοπίζονται από τον μεταγλωττιστή warnings (<span class="p-style">‐Wall ‐Wextra</span>), θα ενσωματωθούν στον εκτελέσιμο κώδικα πληροφορίες αποσφαλμάτωσης (<span class="p-style">‐g3</span>), θα επιχειρηθεί βελτιστοποίηση κώδικα (<span class="p-style">‐Ο</span>) και θα ακολουθηθεί το standard <span class="p-style">C99</span> της γλώσσας. Για τον κανόνα μέσα στον οποίο συναντάται, το σύμβολο <span class="p-style">&#36;@</span> είναι το όνομα του στόχου, ενώ το <span class="p-style">&#36;^</span> είναι η πλήρης λίστα με τα προαπαιτούμενα του κανόνα. Για παράδειγμα στο συγκεκριμένο <span class="p-style">makefile</span>, στον κανόνα που βρίσκεται στις γραμμές 13 και 14, <span class="p-style">&#36;@</span> είναι το <span class="p-style">ch13_p2_geom.o</span> και <span class="p-style">&#36;^</span> είναι τα <span class="p-style">ch13_p2_geom.c</span> και <span class="p-style">ch13_p2_geom.h</span>.</p>
<div class="language-text highlight"><span class="filename">Κώδικας 13.11: ch13_p2_makefile3.mk - 3η έκδοση του makefile με χρήση συμβόλων συντομεύσεων και επιπλέον μεταβλητών.</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>CC=gcc
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>INCLUDE=-I.
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>CFLAGS=-Wall -Wextra -g3 -O -std=c99
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>LDLIBS=-lm
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>TARGET=ch13_p2_main
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>.PHONY:all clean
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>all:$(TARGET)
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>$(TARGET):ch13_p2_geom.o ch13_p2_main.o
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>        $(CC) $^ -o $@ $(LDLIBS)
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>ch13_p2_geom.o:ch13_p2_geom.c ch13_p2_geom.h 
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>        $(CC) -c ch13_p2_geom.c -o $@ $(CFLAGS) $(INCLUDE)
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>ch13_p2_main.o:ch13_p2_main.c ch13_p2_geom.h
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>        $(CC) -c ch13_p2_main.c -o $@ $(CFLAGS) $(INCLUDE)
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>clean:
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>        rm -rf $(TARGET) *.o
</span></code></pre></div>
<p>Η εκτέλεση του <span class="p-style">make</span> με το νέο makefile θα δώσει τα ακόλουθα αποτελέσματα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>$ make ‐f ch13_p2_makefile3.mk
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>$ gcc ‐c ch13_p2_geom.c ‐o ch13_p2_geom.o ‐Wall ‐Wextra ‐g3 ‐O ‐std=c99 ‐I.
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>$ gcc ‐c ch13_p2_main.c ‐o ch13_p2_main.o ‐Wall ‐Wextra ‐g3 ‐O ‐std=c99 ‐I.
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>$ gcc ch13_p2_geom.o ch13_p2_main.o ‐o ch13_p2_main ‐lm
</span></code></pre></div>
<h3 id="1342-make">13.4.2 Πέρα από το make</h3>
<p>Υπάρχουν πολλά άλλα build συστήματα που μπορούν να χρησιμοποιηθούν στη θέση του <span class="p-style">make</span>. Μερικά από αυτά είναι το Meson (<a href="https://mesonbuild.com/" target="_blank">https://mesonbuild.com/</a>), το Bazel (<a href="https://bazel.build/" target="_blank">https://bazel.build/</a>), το Ninja (<a href="https://ninja-build.org/" target="_blank">https://ninja-build.org/</a>), το CMake (<a href="https://cmake.org/" target="_blank">https://cmake.org/</a>) και το Conan (<a href="https://conan.io/" target="_blank">https://conan.io/</a>). Ανάμεσά τους ξεχωριστή θέση έχει το CMake που λειτουργεί ως γεννήτρια για build συστήματα και επιτρέπει τη δημιουργία makefiles, Ninja projects, projects για διάφορα IDEs όπως το Visual Studio της Microsoft, το XCode της Apple, το Clion της JetBrains και άλλα διευκολύνοντας με αυτόν τον τρόπο τη μεταφορά κώδικα μεταξύ διαφορετικών συστημάτων. Για παράδειγμα μπορεί να γραφεί ένα CMake script που να δημιουργεί ένα makefile για συστήματα Linux, ενώ στα Windows να δημιουργεί ένα Visual Studio Project. To CMake είναι αρκετά δημοφιλές και είναι ενσωματωμένο στα IDEs που αναφέρθηκαν. Η εκμάθησή του απαιτεί χρόνο και προσπάθεια, αλλά η γνώση προγραμματισμού του CMake αποτελεί μια σημαντική δεξιότητα για τη C++ και τη C.<br />
Για την εγκατάσταση και χρήση εξωτερικών βιβλιοθηκών της γλώσσας C (π.χ. sqlite3, zlib κ.ά.) μπορεί να χρησιμοποιηθεί το cross-platform λογισμικό διαχείρισης πακέτων (package manager) vcpkg (<a href="https://vcpkg.io/en/" target="_blank">https://vcpkg.io/en/</a>) της Microsoft που συνεργάζεται πολύ καλά με το CMake. Αν η εγκατάσταση βιβλιοθηκών γίνει με το vcpkg, οι θέσεις των αρχείων επικεφαλίδας και αρχείων δυαδικού κώδικα βιβλιοθηκών εντοπίζονται με ευκολία, οπότε μπορούν να οριστούν κατάλληλες τιμές για τους διακόπτες μεταγλώττισης και σύνδεσης (<span class="p-style">‐I, ‐L</span>).<br />
Ένα ακόμα εργαλείο εντοπισμού των θέσεων των αρχείων επικεφαλίδας και των αρχείων δυαδικού κώδικα βιβλιοθηκών είναι το pkg-config (<a href="https://www.freedesktop.org/wiki/Software/pkg-config/" target="_blank">https://www.freedesktop.org/wiki/Software/pkg-config/</a>
) που προέρχεται από τον κόσμο του Linux και των Unix-like συστημάτων. Το pkg-config δεν εγκαθιστά βιβλιοθήκες, αλλά επιστρέφει τις τιμές των διακοπτών που πρέπει να χρησιμοποιηθούν για τη μεταγλώττιση
και σύνδεση εγκατεστημένων βιβλιοθηκών.</p>
<h2 id="135">13.5 Ασκήσεις</h2>
<p><strong><em>Άσκηση 1</em></strong><br />
Γράψτε ένα πρόγραμμα που να εντοπίζει για κάθε διάστημα ενός συνόλου διαστημάτων, το πλήθος των άλλων διαστημάτων που επικαλύπτονται με αυτό. Θεωρήστε ότι κάθε διάστημα ορίζεται με δύο ακέραιες τιμές x και y και αντιστοιχεί στο [x,y). Ο κώδικας να διαμεριστεί σε επιμέρους αρχεία ως εξής:  </p>
<ul>
<li><span class="p-style">interval.c</span>: Περιέχει συνάρτηση για τον έλεγχο του εάν δύο διαστήματα επικαλύπτονται ή όχι.</li>
<li><span class="p-style">logic.c</span>: Υλοποιεί τη λογική ελέγχου που επιστρέφει το πλήθος επικαλυπτόμενων διαστημάτων ενός διαστήματος με ένα σύνολο διαστημάτων.</li>
<li><span class="p-style">main.c</span>: Ζητά τη λήψη διαστημάτων από τον χρήστη και την εμφάνιση του πλήθους των επικαλυπτόμενων διαστημάτων για κάθε διάστημα.</li>
</ul>
<p>Τα αρχεία επικεφαλίδων <span class="p-style">interval.h</span> και <span class="p-style">logic.h</span> να δηλώνουν τις συναρτήσεις των αντίστοιχων <span class="p-style">.c</span> αρχείων. Η δήλωση της δομής <span class="p-style">interval</span> να γίνεται στο <span class="p-style">interval.h</span>. Δώστε τις εντολές μεταγλώττισης και σύνδεσης που απαιτούνται για την παραγωγή του τελικού εκτελέσιμου.  </p>
<details class="tip">
<summary>Λύση άσκησης 1</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">interval.c</label><label for="__tabbed_1_2">interval.h</label><label for="__tabbed_1_3">logic.c</label><label for="__tabbed_1_4">logic.h</label><label for="__tabbed_1_5">main.c</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span>
<span class="normal"><a href="#__codelineno-31-6">6</a></span>
<span class="normal"><a href="#__codelineno-31-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="c1">// https://www.baeldung.com/cs/finding-all-overlapping-intervals</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;interval.h&quot;</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">overlap</span><span class="p">(</span><span class="n">Interval</span><span class="w"> </span><span class="n">int1</span><span class="p">,</span><span class="w"> </span><span class="n">Interval</span><span class="w"> </span><span class="n">int2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">MAX</span><span class="p">(</span><span class="n">int1</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">int2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">int1</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">int2</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="cp">#ifndef INTERVAL_H</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="cp">#define INTERVAL_H</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="cp">#define MAX(X, Y) ((X) &gt; (Y) ? (X) : (Y))</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="cp">#define MIN(X, Y) ((X) &lt; (Y) ? (X) : (Y))</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="p">}</span><span class="w"> </span><span class="n">Interval</span><span class="p">;</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">overlap</span><span class="p">(</span><span class="n">Interval</span><span class="w"> </span><span class="n">int1</span><span class="p">,</span><span class="w"> </span><span class="n">Interval</span><span class="w"> </span><span class="n">int2</span><span class="p">);</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12"></a>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;logic.h&quot;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">count_overlapping</span><span class="p">(</span><span class="n">Interval</span><span class="w"> </span><span class="n">intervals</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">Interval</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">overlap</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">target</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">      </span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">  </span><span class="c1">// Αφαιρούμε 1 από το πλήθος γιατί ο target δεν πρέπει να συγκριθεί με τον</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">  </span><span class="c1">// εαυτό του</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span>
<span class="normal"><a href="#__codelineno-34-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="cp">#ifndef LOGIC_H</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="cp">#define LOGIC_H</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;interval.h&quot;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">count_overlapping</span><span class="p">(</span><span class="n">Interval</span><span class="w"> </span><span class="n">intervals</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">Interval</span><span class="w"> </span><span class="n">target</span><span class="p">);</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;interval.h&quot;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;logic.h&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Enter number of intervals: &quot;</span><span class="p">);</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">  </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">  </span><span class="n">Interval</span><span class="w"> </span><span class="n">intervals</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Enter space-separated start and end for interval %d: &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count_overlapping</span><span class="p">(</span><span class="n">intervals</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Interval [%d, %d) has %d overlapping intervals.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">           </span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">);</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22"></a>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</details>
<p><strong><em>Άσκηση 2</em></strong><br />
Γράψτε ένα makefile για ένα πρόγραμμα που αποτελείται από τα ακόλουθα αρχεία που καλείστε να υλοποιήσετε:</p>
<ul>
<li><span class="p-style">math_functions.c</span>: Περιλαμβάνει δύο συναρτήσεις <span class="p-style">add()</span> και <span class="p-style">multiply()</span>.</li>
<li><span class="p-style">utils.c</span>: Περιέχει βοηθητικές συναρτήσεις για εμφάνιση μηνυμάτων.</li>
<li><span class="p-style">main.c</span>: Καλεί συναρτήσεις για βασικές αριθμητικές πράξεις και εμφάνιση μηνυμάτων.</li>
</ul>
<p>Τα αρχεία επικεφαλίδων <span class="p-style">math_functions.h</span> και <span class="p-style">utils.h</span> να δηλώνουν τις συναρτήσεις των <span class="p-style">.c</span> αρχείων. Το makefile να περιλαμβάνει έναν κανόνα <span class="p-style">all</span> που να δημιουργεί ένα εκτελέσιμο με όνομα <span class="p-style">calculator</span>. Επίσης, να έχει έναν κανόνα <span class="p-style">clean</span> για να καθαρίζει τα αρχεία αντικείμενο και το εκτελέσιμο. Χρησιμοποιήστε μεταβλητές για τον μεταγλωττιστή (π.χ. <span class="p-style">CC</span>) και τους διακόπτες μεταγλώττισης (π.χ. <span class="p-style">CFLAGS</span>).  </p>
<details class="tip">
<summary>Λύση άσκησης 2</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:6"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">math_functions.c</label><label for="__tabbed_2_2">math_functions.h</label><label for="__tabbed_2_3">utils.c</label><label for="__tabbed_2_4">utils.h</label><label for="__tabbed_2_5">main.c</label><label for="__tabbed_2_6">makefile</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span>
<span class="normal"><a href="#__codelineno-36-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;math_functions.h&quot;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">multiply</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="cp">#ifndef MATH_FUNCTIONS_H</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="cp">#define MATH_FUNCTIONS_H</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">multiply</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span>
<span class="normal"><a href="#__codelineno-38-5">5</a></span>
<span class="normal"><a href="#__codelineno-38-6">6</a></span>
<span class="normal"><a href="#__codelineno-38-7">7</a></span>
<span class="normal"><a href="#__codelineno-38-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;utils.h&quot;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_message</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_result</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">operation</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s result: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">operation</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="cp">#ifndef UTILS_H</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="cp">#define UTILS_H</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_message</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_result</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">operation</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;math_functions.h&quot;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;utils.h&quot;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">  </span><span class="n">print_message</span><span class="p">(</span><span class="s">&quot;Calculator App&quot;</span><span class="p">);</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">  </span><span class="n">print_result</span><span class="p">(</span><span class="s">&quot;Addition&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">);</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">  </span><span class="n">print_result</span><span class="p">(</span><span class="s">&quot;Multiplication&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">product</span><span class="p">);</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span>
<span class="normal"><a href="#__codelineno-41-22">22</a></span>
<span class="normal"><a href="#__codelineno-41-23">23</a></span>
<span class="normal"><a href="#__codelineno-41-24">24</a></span>
<span class="normal"><a href="#__codelineno-41-25">25</a></span>
<span class="normal"><a href="#__codelineno-41-26">26</a></span>
<span class="normal"><a href="#__codelineno-41-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="n">CC</span><span class="o">=</span><span class="n">gcc</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="n">CFLAGS</span><span class="o">=-</span><span class="n">Wall</span><span class="w"> </span><span class="o">-</span><span class="n">g</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="cp"># Object files</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="n">OBJS</span><span class="o">=</span><span class="n">main</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">math_functions</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="cp"># Target executable</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="n">TARGET</span><span class="o">=</span><span class="n">calculator</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9"></a>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="nl">all</span><span class="p">:</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11"></a>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="n">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14"></a>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="n">main</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="n">math_functions</span><span class="p">.</span><span class="n">h</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">h</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17"></a>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="n">math_functions</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">math_functions</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="n">math_functions</span><span class="p">.</span><span class="n">h</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">math_functions</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20"></a>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="n">utils</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">h</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23"></a>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24"></a><span class="nl">clean</span><span class="p">:</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25"></a><span class="w">    </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26"></a>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27"></a><span class="p">.</span><span class="n">PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">clean</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</details>
<p><strong><em>Άσκηση 3</em></strong><br />
Γράψτε ένα makefile που να υποστηρίζει τη μεταγλώττιση δύο εκδόσεων ενός προγράμματος: της έκδοσης dev για ανάπτυξη (development) και της έκδοσης prod για παραγωγή (production). Το πρόγραμμα να χρησιμοποιεί τα ακόλουθα αρχεία κώδικα που καλείστε να υλοποιήσετε:</p>
<ul>
<li><span class="p-style">feature.c</span>: Περιλαμβάνει λειτουργικότητα που είναι υπό ανάπτυξη και διαφέρει ανάλογα με την έκδοση.</li>
<li><span class="p-style">utils.c</span>: Παρέχει βοηθητικές συναρτήσεις που είναι κοινές και στις δύο εκδόσεις.</li>
<li><span class="p-style">main.c</span>: Περιέχει την κύρια ροή εκτέλεσης του προγράμματος και τυχόν διαχείριση επιλογών για debugging.</li>
</ul>
<p>Τα αρχεία επικεφαλίδων <span class="p-style">feature.h</span> και <span class="p-style">utils.h</span> να δηλώνουν τις συναρτήσεις των αντίστοιχων <span class="p-style">.c</span> αρχείων. Ο στόχος <span class="p-style">dev</span> να χρησιμοποιεί τους διακόπτες <span class="p-style">‐g ‐DDEBUG</span> για να ενεργοποιεί την αποσφαλμάτωση. Ο στόχος <span class="p-style">prod</span> να χρησιμοποιεί τους διακόπτες <span class="p-style">‐O3<br />
‐DNDEBUG</span> για να παράγει βελτιστοποιημένο κώδικα. Να υπάρχει ένας στόχος <span class="p-style">clean</span> για την αφαίρεση όλων των αρχείων που παράγονται κατά τη μεταγλώττιση.  </p>
<details class="tip">
<summary>Λύση άσκησης 3</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:6"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><input id="__tabbed_3_5" name="__tabbed_3" type="radio" /><input id="__tabbed_3_6" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">feature.c</label><label for="__tabbed_3_2">feature.h</label><label for="__tabbed_3_3">utils.c</label><label for="__tabbed_3_4">utils.h</label><label for="__tabbed_3_5">main.c</label><label for="__tabbed_3_6">makefile</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;feature.h&quot;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">feature</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="cp">#ifdef DEBUG</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Feature in development mode.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="cp">#else</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Feature in production mode.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="cp">#endif</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="cp">#ifndef FEATURE_H</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="cp">#define FEATURE_H</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">feature</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span>
<span class="normal"><a href="#__codelineno-44-4">4</a></span>
<span class="normal"><a href="#__codelineno-44-5">5</a></span>
<span class="normal"><a href="#__codelineno-44-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;utils.h&quot;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">util_function</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Utility function.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="cp">#ifndef UTILS_H</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="cp">#define UTILS_H</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">util_function</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="cp">#endif</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;feature.h&quot;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;utils.h&quot;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="cp">#ifdef DEBUG</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Debugging is enabled.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="cp">#endif</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9"></a>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="w">  </span><span class="n">feature</span><span class="p">();</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="w">  </span><span class="n">util_function</span><span class="p">();</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span>
<span class="normal"><a href="#__codelineno-47-16">16</a></span>
<span class="normal"><a href="#__codelineno-47-17">17</a></span>
<span class="normal"><a href="#__codelineno-47-18">18</a></span>
<span class="normal"><a href="#__codelineno-47-19">19</a></span>
<span class="normal"><a href="#__codelineno-47-20">20</a></span>
<span class="normal"><a href="#__codelineno-47-21">21</a></span>
<span class="normal"><a href="#__codelineno-47-22">22</a></span>
<span class="normal"><a href="#__codelineno-47-23">23</a></span>
<span class="normal"><a href="#__codelineno-47-24">24</a></span>
<span class="normal"><a href="#__codelineno-47-25">25</a></span>
<span class="normal"><a href="#__codelineno-47-26">26</a></span>
<span class="normal"><a href="#__codelineno-47-27">27</a></span>
<span class="normal"><a href="#__codelineno-47-28">28</a></span>
<span class="normal"><a href="#__codelineno-47-29">29</a></span>
<span class="normal"><a href="#__codelineno-47-30">30</a></span>
<span class="normal"><a href="#__codelineno-47-31">31</a></span>
<span class="normal"><a href="#__codelineno-47-32">32</a></span>
<span class="normal"><a href="#__codelineno-47-33">33</a></span>
<span class="normal"><a href="#__codelineno-47-34">34</a></span>
<span class="normal"><a href="#__codelineno-47-35">35</a></span>
<span class="normal"><a href="#__codelineno-47-36">36</a></span>
<span class="normal"><a href="#__codelineno-47-37">37</a></span>
<span class="normal"><a href="#__codelineno-47-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="n">CC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gcc</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="n">CFLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">Wall</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="n">DEBUG_FLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">DDEBUG</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="n">RELEASE_FLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">O3</span><span class="w"> </span><span class="o">-</span><span class="n">DNDEBUG</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="n">OBJ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">feature</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="n">DEVOBJ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_dev</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">feature_dev</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="n">PRODOBJ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_prod</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">feature_prod</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="p">.</span><span class="n">PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">clean</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="n">prod</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11"></a>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="nl">all</span><span class="p">:</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="n">prod</span>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13"></a>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="nl">dev</span><span class="p">:</span><span class="w"> </span><span class="n">CFLAGS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">DEBUG_FLAGS</span><span class="p">)</span>
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="nl">dev</span><span class="p">:</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">DEVOBJ</span><span class="p">)</span>
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">program_dev</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">DEVOBJ</span><span class="p">)</span>
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17"></a>
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18"></a><span class="nl">prod</span><span class="p">:</span><span class="w"> </span><span class="n">CFLAGS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">RELEASE_FLAGS</span><span class="p">)</span>
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19"></a><span class="nl">prod</span><span class="p">:</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">PRODOBJ</span><span class="p">)</span>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">program_prod</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">PRODOBJ</span><span class="p">)</span>
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21"></a>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22"></a><span class="n">main_dev</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">main_dev</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24"></a>
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25"></a><span class="n">feature_dev</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">feature</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">feature</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">feature_dev</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27"></a>
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28"></a><span class="n">main_prod</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">main_prod</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30"></a>
</span><span id="__span-47-31"><a id="__codelineno-47-31" name="__codelineno-47-31"></a><span class="n">feature_prod</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">feature</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-32"><a id="__codelineno-47-32" name="__codelineno-47-32"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">feature</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">feature_prod</span><span class="p">.</span><span class="n">o</span>
</span><span id="__span-47-33"><a id="__codelineno-47-33" name="__codelineno-47-33"></a>
</span><span id="__span-47-34"><a id="__codelineno-47-34" name="__codelineno-47-34"></a><span class="n">utils</span><span class="p">.</span><span class="n">o</span><span class="o">:</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-35"><a id="__codelineno-47-35" name="__codelineno-47-35"></a><span class="w">    </span><span class="n">$</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">CFLAGS</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">utils</span><span class="p">.</span><span class="n">c</span>
</span><span id="__span-47-36"><a id="__codelineno-47-36" name="__codelineno-47-36"></a>
</span><span id="__span-47-37"><a id="__codelineno-47-37" name="__codelineno-47-37"></a><span class="nl">clean</span><span class="p">:</span>
</span><span id="__span-47-38"><a id="__codelineno-47-38" name="__codelineno-47-38"></a><span class="w">    </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">program_dev</span><span class="w"> </span><span class="n">program_prod</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</details>
<p><strong><em>Άσκηση 4</em></strong><br />
Γράψτε ένα makefile για τον κώδικα της παραγράφου 13.2.2 στα πρότυπα του τρίτου παραδείγματος makefile που δόθηκε στην παράγραφο 13.4.1. Προσθέστε στόχους για τη δημιουργία τόσο της δυναμικής βιβλιοθήκης όσο και του τελικού εκτελέσιμου.  </p>
<details class="tip">
<summary>Λύση άσκησης 4</summary>
<div class="language-c highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="o">-</span><span class="mi">-8</span><span class="o">&lt;--</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
</details>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><i>GNU Make.</i> <a href="https://www.gnu.org/software/make/" target="_blank">https://www.gnu.org/software/make/</a>. Accessed: 2023-05-05.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Robert Mecklenburg. <i>Managing Projects with GNU Make: The Power of GNU Make for Building Anything, 3rd edition.</i> O’Reilly Media, 2004.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Τζάλλας Αλέξανδρος, Γκόγκος Χρήστος, Τσούλος Ιωάννης &copy 2025

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "toc.follow", "navigation.instant.preview", "navigation.sections"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>