
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../chapter16/">
      
      
        <link rel="next" href="../chapter18/">
      
      
      <link rel="icon" href="../src/images/frontcover.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>17. Βιβλιοθήκες - Μια σύγχρονη προσέγγιση στη γλώσσα C</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/styles.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: none; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#17" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Μια σύγχρονη προσέγγιση στη γλώσσα C" class="md-header__button md-logo" aria-label="Μια σύγχρονη προσέγγιση στη γλώσσα C" data-md-component="logo">
      
  <img src="../src/images/frontcover.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Μια σύγχρονη προσέγγιση στη γλώσσα C
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              17. Βιβλιοθήκες
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Μια σύγχρονη προσέγγιση στη γλώσσα C" class="md-nav__button md-logo" aria-label="Μια σύγχρονη προσέγγιση στη γλώσσα C" data-md-component="logo">
      
  <img src="../src/images/frontcover.png" alt="logo">

    </a>
    Μια σύγχρονη προσέγγιση στη γλώσσα C
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Το βιβλίο
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Η πορεία της C μέχρι σήμερα
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Εισαγωγικές έννοιες στον προγραμματισμό με τη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Εντολές ελέγχου και επανάληψης
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Συναρτήσεις
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Πίνακες
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Δομές και ενώσεις
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Δείκτες
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8. Αλφαριθμητικά
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9. Διαχείριση μνήμης
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10. Υλοποίηση δομών δεδομένων και αλγορίθμων στη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11. Είσοδος/Έξοδος
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12. Ο προεπεξεργαστής της C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13. Διαμέριση κώδικα
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14. Ανάπτυξη οδηγούμενη από ελέγχους
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15. Αποσφαλμάτωση
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16. Στατική και δυναμική ανάλυση κώδικα
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    17. Βιβλιοθήκες
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    17. Βιβλιοθήκες
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Πίνακας περιεχομένων">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Πίνακας περιεχομένων
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#171-c" class="md-nav__link">
    <span class="md-ellipsis">
      17.1 Η πρότυπη βιβλιοθήλκη της C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="17.1 Η πρότυπη βιβλιοθήλκη της C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1711-stdioh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.1 stdio.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1712-stdlibh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.2 stdlib.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1713-stringh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.3 string.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1714-mathh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.4 math.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1715-timeh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.5 time.h
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#172-c" class="md-nav__link">
    <span class="md-ellipsis">
      17.2 Εξωτερικές βιβλιοθήκες της C
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#173" class="md-nav__link">
    <span class="md-ellipsis">
      17.3 Ασκήσεις
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18. Θέματα στυλ στη C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19. Γραφικό περιβάλλον διεπαφής
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20. Αλληλεπίδραση της C με την Python
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Α. Διαμόρφωση περιβάλλοντος ανάπτυξης κώδικα σε C
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Β. Μεταγλώττιση και εκτέλεση κώδικα C χρησιμοποιώντας το Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Γ. Λήψη πληροφοριών για το σύστημα και το μεταγλωττιστή
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Πίνακας περιεχομένων">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Πίνακας περιεχομένων
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#171-c" class="md-nav__link">
    <span class="md-ellipsis">
      17.1 Η πρότυπη βιβλιοθήλκη της C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="17.1 Η πρότυπη βιβλιοθήλκη της C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1711-stdioh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.1 stdio.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1712-stdlibh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.2 stdlib.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1713-stringh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.3 string.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1714-mathh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.4 math.h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1715-timeh" class="md-nav__link">
    <span class="md-ellipsis">
      17.1.5 time.h
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#172-c" class="md-nav__link">
    <span class="md-ellipsis">
      17.2 Εξωτερικές βιβλιοθήκες της C
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#173" class="md-nav__link">
    <span class="md-ellipsis">
      17.3 Ασκήσεις
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="17">17. Βιβλιοθήκες</h1>
<p><i>Σύνοψη</i> Η πρότυπη βιβλιοθήκη της C, το αρχείο επικεφαλίδας <span class="p-style">stdio.h</span>, οι συναρτήσεις <span class="p-style">snprintf()</span>, <span class="p-style">scanf()</span>, <span class="p-style">perror()</span>, το αρχείο επικεφαλίδας <span class="p-style">stdlib.h</span>, οι συναρτήσεις <span class="p-style">calloc()</span>, <span class="p-style">realloc()</span>, <span class="p-style">abort()</span>, <span class="p-style">atexit()</span>, <span class="p-style">srand()</span>, <span class="p-style">rand()</span>, <span class="p-style">system()</span>, <span class="p-style">bsearch()</span>, <span class="p-style">qsort()</span>, το αρχείο επικεφαλίδας <span class="p-style">string.h</span>, οι συναρτήσεις <span class="p-style">strncat()</span>, <span class="p-style">strncmp()</span>, <span class="p-style">strncpy()</span>, <span class="p-style">strdup()</span>, <span class="p-style">strndup()</span>, <span class="p-style">memset()</span>, <span class="p-style">memcmp()</span>, <span class="p-style">memcpy()</span>, <span class="p-style">memmove()</span>, το αρχείο επικεφαλίδας <span class="p-style">math.h</span>, οι συναρτήσεις <span class="p-style">ceil()</span>, <span class="p-style">floor()</span>, <span class="p-style">trunc()</span>, <span class="p-style">round()</span>, <span class="p-style">modf()</span>, <span class="p-style">fmod()</span>, <span class="p-style">sin()</span>, <span class="p-style">cos()</span>, <span class="p-style">tan()</span>, <span class="p-style">asin()</span>, <span class="p-style">acos()</span>, <span class="p-style">atan()</span>, το αρχείο επικεφαλίδας <span class="p-style">tgmath.h</span>, το αρχείο επικεφαλίδας <span class="p-style">time.h</span>, οι τύποι <span class="p-style">clock_t</span>, <span class="p-style">struct tm</span>, οι συναρτήσεις <span class="p-style">ctime()</span>, <span class="p-style">difftimef()</span>, <span class="p-style">gmtime()</span>, <span class="p-style">localtime()</span>, <span class="p-style">asctime()</span>, <span class="p-style">strftime()</span>, η σταθερά <span class="p-style">CLOCKS_PER_SEC</span>, εξωτερικές βιβλιοθήκες, το λογισμικό vcpkg, παράδειγμα κλήσης συναρτήσεων της βιβλιοθήκης GSL.  </p>
<p><i>Προαπαιτούμενη γνώση</i> Τύποι δεδομένων, είσοδος/έξοδος, δομές επιλογής και επανάληψης, συναρτήσεις, πίνακες, δείκτες, αλφαριθμητικά, διαμερισμός κώδικα.</p>
<h2 id="171-c">17.1 Η πρότυπη βιβλιοθήλκη της C</h2>
<p>Η πρότυπη βιβλιοθήκη της C, η <span class="p-style">libc</span>, είναι μια συλλογή από συναρτήσεις, μακροεντολές και τύπους που αποτελεί τμήμα των προδιαγραφών της γλώσσας. Οι συναρτήσεις της πρότυπης βιβλιοθήκης υλοποιούν βασικές λειτουργίες που χρησιμοποιούνται συχνά και καθώς συμπεριλαμβάνονται στη γλώσσα δεν χρειάζεται να υλοποιηθούν εκ νέου από τον προγραμματιστή ούτε να αναζητηθούν εξωτερικές βιβλιοθήκες για αυτές. Η πρότυπη βιβλιοθήκη περιλαμβάνει διάφορα αρχεία επικεφαλίδων όπως τα <span class="p-style">stdio.h, stdlib.h, string.h, math.h, time.h</span> και άλλα, με το καθένα να παρέχει διαφορετικά σύνολα συναρτήσεων, τύπων και μακροεντολών.</p>
<h3 id="1711-stdioh">17.1.1 stdio.h</h3>
<p>Το αρχείο επικεφαλίδας stdio.h περιέχει συναρτήσεις όπως οι <span class="p-style">printf()</span>, <span class="p-style">scanf()</span>, <span class="p-style">fopen()</span>, <span class="p-style">fclose()</span>, <span class="p-style">fprintf()</span> και <span class="p-style">fscanf()</span> που είδαμε σε προηγούμενα κεφάλαια. Το <span class="p-style">stdio.h</span> περιέχει πολλές άλλες χρήσιμες συναρτήσεις. Στη συνέχεια θα παρουσιαστούν 3 από αυτές, η <span class="p-style">snprintf()</span>, η <span class="p-style">sscanf()</span> και η <span class="p-style">perror()</span>.   </p>
<p><i><span class="p-style">snprintf()</span></i> Η συνάρτηση <span class="p-style">snprintf()</span> λειτουργεί παρόμοια με την <span class="p-style">printf()</span>, αλλά αποθηκεύει το μορφοποιημένο αλφαριθμητικό που παράγει σε ένα αλφαριθμητικό αντί να το εμφανίσει στην οθόνη. Τα τρία πρώτα υποχρεωτικά ορίσματα που δέχεται είναι: α) ένα αλφαριθμητικό εξόδου, β) το μέγιστο πλήθος χαρακτήρων που θα γραφούν στο αλφαριθμητικό εξόδου, συμπεριλαμβανομένου του συμβόλου '<span class="p-style">\0</span>', και γ) ένα αλφαριθμητικό μορφοποίησης, όπως αυτά που χρησιμοποιεί η <span class="p-style">printf()</span>. Επιστρέφει το πλήθος των χαρακτήρων που γράφονται στο αλφαριθμητικό εξόδου. Στον κώδικα 17.1 παρουσιάζεται ένα απλό παράδειγμα που εγγράφει σε ένα αλφαριθμητικό έναν ακέραιο και δύο πραγματικούς  αριθμούς. Στη συνέχεια, το αλφαριθμητικό εμφανίζεται στην οθόνη.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.1: ch17_p1.c - χρήση αλφαριθμητικού για την έξοδο τιμών.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">output_string</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.73f</span><span class="p">;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snprintf</span><span class="p">(</span><span class="n">output_string</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">output_string</span><span class="p">),</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">                   </span><span class="s">&quot;a=%d, b=%.2f, c=%.2lf&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Characters written=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">output_string</span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθούν τα αποτελέσματα εκτέλεσης του κώδικα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Characters written=20
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>a=10, b=2.73, c=3.14
</span></code></pre></div>
<p>Αξίζει να σημειωθεί ότι ισοδύναμη λειτουργικότητα παρέχει και η συνάρτηση <span class="p-style">sprintf()</span>, αλλά πλέον είναι deprecated (δηλαδή η χρήση της δεν συνίσταται και μπορεί να αποσυρθεί σε μελλοντικές εκδόσεις). Η προειδοποίηση που επιστρέφει ο μεταγλωττιστής gcc, αν χρησιμοποιηθεί ο διακόπτης <span class="p-style">‐fsanitize=address</span>, είναι να μη χρησιμοποιείται η <span class="p-style">sprintf()</span>, λόγω του ότι δεν παρέχει έλεγχο για πιθανή υπερχείλιση του αλφαριθμητικού στο οποίο κατευθύνεται η έξοδος.  </p>
<p><i><span class="p-style">sscanf()</span></i> Η συνάρτηση <span class="p-style">sscanf()</span> λειτουργεί παρόμοια με την <span class="p-style">scanf()</span>, αλλά αντί να διαβάζει την είσοδο από το πληκτρολόγιο, διαβάζει από ένα αλφαριθμητικό. Δέχεται δύο κύρια ορίσματα, ένα αλφαριθμητικό εισόδου και ένα αλφαριθμητικό μορφοποίησης που ορίζει την αναμενόμενη μορφή των δεδομένων εισόδου, όπως στην <span class="p-style">scanf()</span>. Η <span class="p-style">sscanf()</span> διαβάζει δεδομένα από το αλφαριθμητικό εισόδου και αναθέτει τιμές με βάση το αλφαριθμητικό μορφοποίησης σε αντίστοιχες μεταβλητές που περνούν ως επιπλέον ορίσματα μετά το αλφαριθμητικό μορφοποίησης. Η συνάρτηση επιστρέφει το πλήθος των εισόδων που αντιστοιχίστηκαν επιτυχώς και ανατέθηκαν ή <span class="p-style">EOF</span> αν συμβεί κάποιο σφάλμα (π.χ. κενό αλφαριθμητικό εισόδου). Ο κώδικας 17.2 είναι ένα παράδειγμα χρήσης της <span class="p-style">sscanf()</span>, όπου η είσοδος τιμών για 3 μεταβλητές δίνεται από ένα αλφαριθμητικό.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.2: ch17_p2.c - ανάγνωση εισόδου από ένα αλφαριθμητικό.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">input_string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Jane Doe 25&quot;</span><span class="p">;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">first_name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">last_name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sscanf</span><span class="p">(</span><span class="n">input_string</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s %s %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">age</span><span class="p">);</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">EOF</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Error in parsing input data</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d values read.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;First Name: %s, Last Name: %s, Age: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">           </span><span class="n">age</span><span class="p">);</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η εκτέλεση του προγράμματος θα δώσει την ακόλουθη έξοδο:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>3 values read.
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>First Name: Jane, Last Name: Doe, Age: 25
</span></code></pre></div>
<p><i><span class="p-style">perror()</span></i> Ορισμένες συναρτήσεις της πρότυπης βιβλιοθήκης, αλλά και συναρτήσεις άλλων βιβλιοθηκών, έχουν γραφεί έτσι ώστε όταν προκαλείται ένα σφάλμα η καθολική μεταβλητή <span class="p-style">errno</span> που ορίζεται στο <span class="p-style">errno.h</span> να λαμβάνει μια αναγνωριστική τιμή σφάλματος. Η διαδικασία που ακολουθείται για τον χειρισμό λαθών που θέτουν τιμή στην <span class="p-style">errno</span> είναι η ακόλουθη:</p>
<ol>
<li>Κλήση συνάρτησης που μπορεί να προκαλέσει κάποια κατάσταση σφάλματος.</li>
<li>Αν το σφάλμα προκληθεί, τότε η συνάρτηση επιστρέφει μια τιμή που υποδηλώνει ότι συνέβη πρόβλημα (π.χ. <span class="p-style">NULL</span> ή -1 ή κάποια άλλη τιμή).</li>
<li>Ο κώδικας που κάλεσε τη συνάρτηση ελέγχει την τιμή του <span class="p-style">errno</span> για να καθορίσει τον τύπο του σφάλματος.</li>
<li>Χειρισμός λάθους (π.χ. εμφάνιση μηνύματος λάθους, καταγραφή λάθους, τερματισμός προγράμματος).</li>
</ol>
<p>Η συνάρτηση <span class="p-style">perror()</span> χρησιμοποιείται κυρίως για να εμφανίσει μηνύματα αποσφαλμάτωσης. Η κλήση της εμφανίζει ένα μήνυμα που ορίζει ο προγραμματιστής που ακολουθείται από τον χαρακτήρα <span class="p-style">:</span> και την περιγραφή του πλέον πρόσφατου σφάλματος που συνέβη και έθεσε την τιμή του <span class="p-style">errno</span>.<br />
Παραδείγματα συναρτήσεων που μπορεί να προκαλέσουν σφάλματα κατά την κλήση τους είναι η <span class="p-style">fopen()</span> της <span class="p-style">stdio.h</span>, η <span class="p-style">malloc()</span> της <span class="p-style">stdlib.h</span>, η <span class="p-style">read()</span> της <span class="p-style">unistd.h</span> και άλλες. Στον κώδικα 17.3 παρουσιάζεται ένα παράδειγμα που η <span class="p-style">fopen()</span> θέτει την τιμή του <span class="p-style">errno</span> επιχειρώντας να ανοίξει ένα αρχείο που δεν εντοπίζεται.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.3: ch17_p3.c - αποτυχημένο άνοιγμα αρχείου και χειρισμός του λάθους που προκύπτει.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">  </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">fp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="s">&quot;non_existent_file.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="p">);</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fp</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;errno=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">errno</span><span class="p">);</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;Error opening file&quot;</span><span class="p">);</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η έξοδος του προγράμματος, δεδομένου ότι το αρχείο <span class="p-style">non_existent_file.txt</span> δεν υπάρχει στο σύστημα είναι:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>errno=2
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Error opening file: No such file or directory
</span></code></pre></div>
<h3 id="1712-stdlibh">17.1.2 stdlib.h</h3>
<p>Το <span class="p-style">stdlib.h</span> περιέχει συναρτήσεις για δέσμευση και αποδέσμευση μνήμης όπως η <span class="p-style">malloc()</span> και η <span class="p-style">free()</span>, συναρτήσεις για έλεγχο διεργασιών όπως η <span class="p-style">exit()</span>, συναρτήσεις μετατροπής αλφαριθμητικού σε ακέραιο όπως η <span class="p-style">atoi()</span>, συναρτήσεις παραγωγής τυχαίων τιμών όπως η <span class="p-style">rand()</span> και η <span class="p-style">srand()</span>, καθώς και άλλες συναρτήσεις. Στη συνέχεια θα εξεταστούν μερικές βασικές δυνατότητες που προσφέρει η <span class="p-style">stdlib.h</span>.  </p>
<p>Δυναμική δέσμευση μνήμης Εκτός από τη <span class="p-style">malloc()</span> υπάρχουν και άλλες συναρτήσεις δυναμικής δέσμευσης μνήμης όπως η <span class="p-style">calloc()</span> και η <span class="p-style">realloc()</span>, όπως είδαμε στην παράγραφο 9.1.5. H <span class="p-style">calloc()</span> δέχεται δύο ορίσματα, το πλήθος των στοιχείων που θα δεσμεύσει σε συνεχόμενες θέσεις μνήμης και το μέγεθος σε bytes κάθε στοιχείου. Επιστρέφει έναν δείκτη προς το πρώτο byte του μπλοκ μνήμης που δεσμεύει, αρχικοποιώντας όλα τα bytes σε μηδέν. Αν αποτύχει η δέσμευση μνήμης, η <span class="p-style">calloc()</span> επιστρέφει την τιμή <span class="p-style">NULL</span>. Η <span class="p-style">realloc()</span> χρησιμοποιείται για να αλλάξει μέγεθος σε μνήμη που έχει δεσμευθεί σε προηγούμενη δέσμευση μνήμης. Δέχεται ως ορίσματα έναν δείκτη προς δεσμευμένη μνήμη και το μέγεθος της μνήμης που θα δεσμευθεί. Η <span class="p-style">realloc()</span>, στην περίπτωση που αυξάνει το μέγεθος της μνήμης που δεσμεύει σε σχέση με πριν, διατηρεί τα δεδομένα της προηγούμενης δεσμευμένης μνήμης. Ακολουθεί, στον κώδικα 17.4, ένα παράδειγμα που αρχικά δεσμεύεται δυναμικά χώρος μνήμης για έναν πίνακα 5 ακεραίων, με την <span class="p-style">calloc()</span> αρχικοποιώντας όλες τις τιμές του πίνακα με μηδέν. Στη συνέχεια, με τη <span class="p-style">realloc()</span> ο δεσμευμένος χώρος επεκτείνεται έτσι ώστε να διατηρεί πλέον 10 θέσεις ακεραίων</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.4: ch17_p4.c - αρχική δυναμική δέσμευση πίνακα και μετέπειτα επέκτασή του με τη realloc().</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_array</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">}</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">num_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">num_elements</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Initial memory allocation failed!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Initial memory allocation successful!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">  </span><span class="n">print_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="n">num_elements</span><span class="p">);</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">  </span><span class="n">num_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">  </span><span class="c1">// Αλλαγή μεγέθους πίνακα για να χωρά 10 τιμές</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">resized_arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">realloc</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="n">num_elements</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">resized_arr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Memory reallocation failed!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Memory reallocation successful!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="w">  </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resized_arr</span><span class="p">;</span><span class="w"> </span><span class="c1">// Ενημέρωση του δείκτη προς το νέο πίνακα</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">  </span><span class="n">print_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="n">num_elements</span><span class="p">);</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span><span class="w"> </span><span class="c1">// απελευθέρωση μνήμης, είτε πέτυχε η αλλαγή μεγέθους είτε όχι</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η εκτέλεση του προγράμματος δίνει τα ακόλουθα αποτελέσματα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Initial memory allocation successful!
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>0 0 0 0 0
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>Memory reallocation successful!
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>0 0 0 0 0 0 0 0 0 0
</span></code></pre></div>
<p>Αξίζει να σημειωθεί ότι οι 5 πρώτες τιμές του πίνακα αναμένεται σε κάθε εκτέλεση να έχουν μηδενική τιμή (πριν και μετά την αλλαγή μεγέθους). Οι υπόλοιπες θέσεις του πίνακα, αν και συμβαίνει στο συγκεκριμένο παράδειγμα εκτέλεσης, δεν υπάρχει εγγύηση ότι θα είναι μηδενικές.</p>
<p><i><span class="p-style">Χειρισμός τερματισμού προγραμμάτων</span></i> Μια άλλη ομάδα συναρτήσεων είναι οι <span class="p-style">exit()</span>, <span class="p-style">abort()</span> και <span class="p-style">atexit()</span> που πραγματοποιούν τερματισμό του προγράμματος και την εκτέλεση ενεργειών πριν τον τερματισμό του. Η συνάρτηση <span class="p-style">exit()</span> προκαλεί κανονικό τερματισμό του προγράμματος και επιστροφή του ελέγχου στο λειτουργικό σύστημα. Δέχεται ως όρισμα μια ακέραια τιμή, την κατάσταση εξόδου (exit status), που υποδηλώνει την κατάσταση με την οποία τερμάτισε την εκτέλεσή του το πρόγραμμα. Η τιμή αυτή μπορεί να ληφθεί με εντολές που θα αναφερθούν στη συνέχεια σε συστήματα Linux, MacOS ή Windows και μπορούν να χρησιμοποιούνται, για παράδειγμα, σε shell scripts για να καθοδηγήσουν την εκτέλεση μιας ομάδας ενεργειών. Στο ακόλουθο παράδειγμα (κώδικας 17.5) καλείται είτε η <span class="p-style">exit()</span> είτε η <span class="p-style">abort()</span>.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.5: ch17_p5.c - κλήση των συναρτήσεων exit() και abort(), ανάλογα με την είσοδο του χρήστη.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">choice</span><span class="p">;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;How do you want to stop the program (1=exit, 2=abort, 3=return)? &quot;</span><span class="p">);</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">choice</span><span class="p">);</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Let&#39;s set the exit status to 99.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">);</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Abort.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="n">abort</span><span class="p">();</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθούν αποτελέσματα 3 εκτελέσεων του κώδικα. Σε κάθε περίπτωση, η κατάσταση εξόδου του προγράμματος (αν έχει τεθεί) λαμβάνεται με την εντολή <span class="p-style">echo $?</span> σε Linux ή σε MacOS. Αν η έξοδος έχει γίνει με την <span class="p-style">exit()</span> ή την <span class="p-style">return()</span> τότε η κατάσταση εξόδου είναι η τιμή του ορίσματος που έχει περάσει στη συνάρτηση. Αν η έξοδος γίνεται με το <span class="p-style">abort()</span>, τότε δεν λαμβάνεται πίσω κάποια τιμή με νόημα ως κατάσταση εξόδου του προγράμματος (για παράδειγμα, η συγκεκριμένη εκτέλεση επιστρέφει την τιμή 134).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$ ./ch17_p5
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>How do you want to stop the program (1=exit, 2=abort, 3=return)? 1
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Let&#39;s set the exit status to 99.
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>$ echo $?
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>99
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>$ ./ch17_p5
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>How do you want to stop the program (1=exit, 2=abort, 3=return)? 2
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>Abort.
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>zsh: abort  ch17_p5
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>$ echo $?
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>134
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>$ ./ch17_p5
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>How do you want to stop the program (1=exit, 2=abort, 3=return)? 3
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>$ echo $?
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>0
</span></code></pre></div>
<p>Αν το πρόγραμμα μεταγλωττιστεί και εκτελεστεί σε Windows, τότε η κατάσταση εξόδου λαμβάνεται με την εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>&gt; echo %ERRORLEVEL%
</span></code></pre></div>
<p>Επιπλέον, η συνάρτηση <span class="p-style">atexit()</span> μπορεί να χρησιμοποιηθεί έτσι ώστε να εκτελεστεί κάποιος κώδικας όταν το πρόγραμμα τερματίσει κανονικά την εκτέλεσή του. Η συνάρτηση <span class="p-style">atexit()</span> δέχεται ως όρισμα μια συνάρτηση που θα εκτελεστεί όταν το πρόγραμμα τερματιστεί επιτυχώς και συνήθως χρησιμοποιείται για αποδέσμευση πόρων και εμφάνιση μηνυμάτων. Στον κώδικα 17.6 παρουσιάζεται ένα παράδειγμα χρήσης της <span class="p-style">atexit()</span>.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.6: ch17_p6.c - κλήση συνάρτησης ακριβώς πριν τον τερματισμό εκτέλεσης του προγράμματος.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Program terminated blissfully!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Program Started</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="n">atexit</span><span class="p">(</span><span class="n">cleanup</span><span class="p">);</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Ready to exit (y/n)? &quot;</span><span class="p">);</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">choice</span><span class="p">;</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">  </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">choice</span><span class="p">);</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;y&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;Y&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;n&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">choice</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;N&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">    </span><span class="n">abort</span><span class="p">();</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί ένα παράδειγμα εκτέλεσης.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Program Started
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Ready to exit (y/n)? y
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Program terminated blissfully!
</span></code></pre></div>
<p><i><span class="p-style">Δημιουργία τυχαίων αριθμών</span></i> Οι δύο συναρτήσεις του <span class="p-style">stdlib.h</span> που επιτρέπουν τη δημιουργία ψευδοτυχαίων τιμών είναι η <span class="p-style">srand()</span> και η <span class="p-style">rand()</span>. H <span class="p-style">srand()</span>, δέχεται ως όρισμα το λεγόμενο seed (σπόρος). Αν παραλειφθεί, χρησιμοποιείται ως seed η τιμή 1. Αν εκτελεστεί μια διαδικασία παραγωγής τυχαίων αριθμών και χρησιμοποιηθεί το ίδιο seed, τότε οι ψευδοτυχαίες τιμές που θα εμφανιστούν θα είναι οι ίδιες με την προηγούμενη εκτέλεση. Για να λαμβάνονται διαφορετικές τιμές σε κάθε εκτέλεση, συνήθως χρησιμοποιείται η τιμή που επιστρέφει η κλήση <span class="p-style">time(NULL)</span> που όπως θα δούμε και στη συνέχεια του ίδιου κεφαλαίου, επιστρέφει το πλήθος δευτερολέπτων της χρονικής στιγμής που πραγματοποιείται η εκτέλεση από την ημερομηνία και ώρα 1/1/1970 00:00:00. Η <span class="p-style">rand()</span> επιστρέφει μια τυχαία ακέραια τιμή από 0 μέχρι <span class="p-style">RAND_MAX</span>. H <span class="p-style">RAND_MAX</span> ορίζεται στη <span class="p-style">stdlib.h</span> και το πρότυπο της γλώσσας αναφέρει ότι θα πρέπει να έχει ελάχιστη τιμή <span class="p-style">2<sup>15</sup> − 1 = 32767</span>. Ωστόσο, σε πολλές σύγχρονες υλοποιήσεις η τιμή του RAND_MAX είναι η μέγιστη τιμή που μπορεί να λάβει ένας προσημασμένος ακέραιος 32-bit, που είναι <span class="p-style">2<sup>31</sup> − 1 = 2147483647</span>. Στον κώδικα 17.7 παρουσιάζεται ένα παράδειγμα δημιουργίας 10 ακεραίων τιμών, επί δύο φορές, με κάθε ακέραια τιμή να βρίσκεται στο διάστημα από 1 έως και 10.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.7: ch17_p7.c - δημιουργία 10 τυχαίων τιμών με seed την τιμή 42 και δημιουργία άλλων 10 τυχαίων τιμών με seed μια τιμή που αλλάζει σε κάθε εκτέλεση.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="n">srand</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span><span class="w"> </span><span class="c1">// για επαναληψιμότητα αποτελεσμάτων χρησιμοποιείται ένα seed,</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">             </span><span class="c1">// εδώ η τιμή 42</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%2d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">  </span><span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span><span class="w"> </span><span class="c1">// το seed αλλάζει σε κάθε εκτέλεση του προγράμματος</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%2d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθούν τα αποτελέσματα που παράγονται από δύο εκτελέσεις του κώδικα. Η πρώτη εκτέλεση εμφανίζει:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>  5  4  10  4  7   2  2  1  1  6
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a> 10  5   6  6  2  10  1  9  9  8
</span></code></pre></div>
<p>Η δεύτερη εκτέλεση εμφανίζει:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a> 5  4  10  4  7   2  2  1  1  6
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a> 7  8   9  5  8  10  2  6  1  8
</span></code></pre></div>
<p>Η πρώτη γραμμή της εξόδου είναι ίδια και στις δύο περιπτώσεις (διότι έχει χρησιμοποιηθεί το ίδιο seed), ενώ η δεύτερη διαφέρει.<br />
Ένα μειονέκτημα της ανάθεσης τιμής στο seed με το <span class="p-style">time(NULL)</span> είναι ότι η τιμή που επιστρέφει το <span class="p-style">time(NULL)</span> αλλάζει σχετικά αργά (κάθε δευτερόλεπτο), οπότε αν το πρόγραμμα εκτελείται ξανά σε διάστημα μικρότερο του ενός δευτερολέπτου, οι τυχαίες τιμές θα είναι οι ίδιες. Για να αποφευχθεί αυτή η συμπεριφορά μπορεί να χρησιμοποιηθεί η συνάρτηση <span class="p-style">gettimeofday()</span> από το <span class="p-style">sys/time.h</span> που επιστρέφει το χρονικό διάστημα από 1/1/1970 00:00:00 μέχρι την τρέχουσα χρονική στιγμή με ακρίβεια μικροδευτερολέπτων. Ο κώδικας 17.8 παρουσιάζει την παραγωγή 5 ομάδων πραγματικών τυχαίων αριθμών στο διάστημα από 0 μέχρι 1, χρησιμοποιώντας τη συνάρτηση <span class="p-style">gettimeofday()</span>.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.8: ch17_p8.c - δημιουργία τυχαίων τιμών με seed τιμή που επιστρέφει η συνάρτηση gettimeofday().</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/time.h&gt;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">timeval</span><span class="w"> </span><span class="n">current_time</span><span class="p">;</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_time</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="kt">long</span><span class="w"> </span><span class="n">seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">current_time</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="n">srand</span><span class="p">(</span><span class="n">seed</span><span class="p">);</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SEED = %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">seed</span><span class="p">);</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">      </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">RAND_MAX</span><span class="p">;</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.4lf &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί ένα παράδειγμα εκτέλεσης:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>SEED = 774255
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>0.0596 0.7902 0.1987 0.1579 0.6974 0.2448 0.5293 0.4014 0.6387 0.6481
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>0.4010 0.7232 0.0741 0.6294 0.9382 0.0232 0.7664 0.3592 0.4847 0.9366
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>0.6032 0.2064 0.1106 0.1082 0.9458 0.2407 0.2765 0.0262 0.5820 0.3237
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>0.4546 0.6432 0.5426 0.6371 0.0795 0.9908 0.5744 0.6008 0.6509 0.2925
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>0.0924 0.4719 0.4286 0.5220 0.5141 0.4083 0.3387 0.9178 0.0553 0.7129
</span></code></pre></div>
<p>Αλληλεπίδραση με το λειτουργικό σύστημα Η συνάρτηση <span class="p-style">system()</span> επιτρέπει την εκτέλεση προγραμμάτων που θα μπορούσαν να εκτελεστούν από τη γραμμή εντολών. Ο κώδικας 17.9 είναι ένα παράδειγμα που ανάλογα με το είδος του λειτουργικού συστήματος (Linux, Windows, MacOS), εκτελείται μια εντολή που εμφανίζει πληροφορίες για το υλικό του συστήματος.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.9: ch17_p9.c - επιστροφή πληροφοριών συστήματος.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="cp">#ifdef __linux__</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hardware Information:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">  </span><span class="n">system</span><span class="p">(</span><span class="s">&quot;lscpu&quot;</span><span class="p">);</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="cp">#elif __APPLE__</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;System Information:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">  </span><span class="n">system</span><span class="p">(</span><span class="s">&quot;system_profiler SPHardwareDataType&quot;</span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="cp">#elif _WIN32</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;System Information:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">  </span><span class="n">system</span><span class="p">(</span><span class="s">&quot;systeminfo&quot;</span><span class="p">);</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="cp">#else</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Unsupported platform.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="cp">#endif</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η ακόλουθη έξοδος είναι τα αποτέλεσμα της εκτέλεσης σε ένα σύστημα MacOS:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>System Information:
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>Hardware:
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>    Hardware Overview:
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>        Model Name: Mac mini
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>        Model Identifier: Mac14 ,12
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>        Model Number: MNH73LL/A
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>        Chip: Apple M2 Pro
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>        Total Number of Cores: 10 (6 performance and 4 efficiency)
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>        Memory: 16 GB
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>        System Firmware Version: 10151.1.1
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>        OS Loader Version: 10151.1.1
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>        Serial Number (system): XXXXXXXXX
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        Hardware UUID: XXXX‐XXXX‐XXXX‐XXXX‐XXXXXXXXXXX
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>        Provisioning UDID: XXXXXXXX ‐XXXXXXXXXXXX
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>        Activation Lock Status: Enabled
</span></code></pre></div>
<p><i><span class="p-style">Συνάρτηση γρήγορης ταξινόμησης και συνάρτηση δυαδικής αναζήτησης</span></i> Οι συναρτήσεις <span class="p-style">qsort()</span> και <span class="p-style">bsearch()</span> πραγματοποιούν ταξινόμηση και αναζήτηση αντίστοιχα. Η <span class="p-style">qsort()</span> υλοποιεί τον αλγόριθμο γρήγορης ταξινόμησης και μπορεί να χρησιμοποιηθεί για να ταξινομήσει αριθμούς, αλφαριθμητικά, και σύνθετες δομές. Έχει τέσσερις παραμέτρους: έναν δείκτη προς τον πίνακα που θα ταξινομηθεί, το πλήθος των στοιχείων του πίνακα, το μέγεθος κάθε στοιχείου σε bytes και μια συνάρτηση σύγκρισης. Η συνάρτηση σύγκρισης καλείται από την <span class="p-style">qsort()</span> κάθε φορά που πρέπει να συγκριθούν δύο στοιχεία. Αν επιστρέψει αρνητική τιμή σημαίνει ότι το πρώτο στοιχείο είναι μικρότερο του δεύτερου, αν επιστρέψει μηδέν σημαίνει ότι είναι ίσα και αν επιστρέψει θετική τιμή σημαίνει ότι το πρώτο στοιχείο είναι μεγαλύτερο του δεύτερου. Συνεπώς, ο προγραμματιστής πρέπει να γράψει την κατάλληλη συνάρτηση σύγκρισης και να την περάσει ως τέταρτο όρισμα στην <span class="p-style">qsort()</span> κατά την κλήση της. Η συνάρτηση <span class="p-style">bsearch()</span> υλοποιεί τον αλγόριθμο δυαδικής αναζήτησης που εντοπίζει τη θέση μιας τιμής σε έναν πίνακα. Πρόκειται για έναν ταχύτατο αλγόριθμο, αλλά απαιτεί ο πίνακας στον οποίο γίνεται η αναζήτηση να είναι διατεταγμένος σε αύξουσα σειρά. Η <span class="p-style">bsearch()</span> έχει πέντε παραμέτρους: την τιμή αναζήτησης, έναν δείκτη προς τον πίνακα στον οποίο θα γίνει αναζήτηση, το πλήθος των στοιχείων του πίνακα, το μέγεθος κάθε στοιχείου σε bytes και μια συνάρτηση σύγκρισης. Στο παράδειγμα του κώδικα 17.10, χρησιμοποιούνται και οι δύο συναρτήσεις. Αρχικά, ένας πίνακας ταξινομείται σε αύξουσα σειρά και στη συνέχεια ζητείται για μια συγκεκριμένη τιμή εάν υπάρχει στον πίνακα. Η συνάρτηση σύγκρισης <span class="p-style">cmp()</span> που περνά ως τελευταίο όρισμα και στις δύο συναρτήσεις, δέχεται με τη σειρά της ως ορίσματα δείκτες προς ακεραίους, οπότε στο σώμα της πραγματοποιείται αποαναφορά και στους δύο δείκτες για να επιστραφεί το σωστό αποτέλεσμα.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.10: ch17_p10.c - ταξινόμηση πίνακα και μετά δυαδική αναζήτηση για εντοπισμό της θέσης μιας τιμής στον πίνακα.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="c1">// Συνάρτηση σύγκρισης για την qsort και την bsearch</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">cmp</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">};</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span><span class="w"> </span><span class="c1">// Το στοιχείο που αναζητούμε</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">found</span><span class="p">;</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">  </span><span class="c1">// Ταξινόμηση του πίνακα με την qsort</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">  </span><span class="n">qsort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span><span class="w"> </span><span class="n">cmp</span><span class="p">);</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Ταξινομημένος πίνακας: &quot;</span><span class="p">);</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20"></a>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">  </span><span class="c1">// Δυαδική αναζήτηση με την bsearch</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">  </span><span class="n">found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">bsearch</span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span><span class="w"> </span><span class="n">cmp</span><span class="p">);</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23"></a>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Το στοιχείο %d βρέθηκε στη θέση %ld.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26"></a><span class="w">           </span><span class="p">(</span><span class="n">found</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">array</span><span class="p">));</span><span class="w"> </span><span class="c1">// ή found - &amp;array[0]</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Το στοιχείο %d δεν βρέθηκε.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30"></a>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Το αποτέλεσμα της εκτέλεσης του προγράμματος θα είναι:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>Ταξινομημένος πίνακας: 1 3 5 7 10 15 20 25 30 40
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>Το στοιχείο 25 βρέθηκε στη θέση 7.
</span></code></pre></div>
<h3 id="1713-stringh">17.1.3 string.h</h3>
<p>Στο κεφάλαιο 8, στην παράγραφο 8.6, παρουσιάστηκαν 4 βασικές συναρτήσεις που ορίζονται στο <span class="p-style">string.h</span>, η <span class="p-style">strlen()</span> για υπολογισμό του μήκους ενός αλφαριθμητικού, η <span class="p-style">strcat()</span> για συνένωση αλφαριθμητικών, η <span class="p-style">strcmp()</span> για σύγκριση αλφαριθμητικών και η <span class="p-style">strtok()</span> για διαχωρισμό ενός αλφαριθμητικού σε τμήματα. Για τις <span class="p-style">strcat()</span>, <span class="p-style">strcmp()</span> καθώς και για τη <span class="p-style">strcpy()</span> που πραγματοποιεί αντιγραφή ενός αλφαριθμητικού σε ένα άλλο, υπάρχουν άλλες εκδόσεις τους που το όνομά τους σχηματίζεται παρεμβάλλοντας το γράμμα <span class="p-style">n</span> μετά τα τρία πρώτα γράμματα (<span class="p-style">str</span>) των συναρτήσεων. Έτσι, προκύπτουν οι συναρτήσεις <span class="p-style">strncat()</span>, <span class="p-style">strncmp()</span>, <span class="p-style">strncpy()</span> που δέχονται ένα επιπλέον όρισμα <span class="p-style">n</span> και εφαρμόζουν την αντίστοιχη ενέργεια στους <span class="p-style">n</span> πρώτους χαρακτήρες μόνο. Οι συναρτήσεις αυτές θεωρούνται ασφαλείς, καθώς δεν επιτρέπουν την υπερχείλιση των αλφαριθμητικών που δέχονται ως όρισμα εξόδου. Στον κώδικα 17.11, παρουσιάζεται ένα παράδειγμα χρήσης των συναρτήσεων που αναφέρθηκαν.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.11: ch17_p11.c - χρήση ασφαλών συναρτήσεων για χειρισμό αλφαριθμητικών.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span>
<span class="normal"><a href="#__codelineno-22-23">23</a></span>
<span class="normal"><a href="#__codelineno-22-24">24</a></span>
<span class="normal"><a href="#__codelineno-22-25">25</a></span>
<span class="normal"><a href="#__codelineno-22-26">26</a></span>
<span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span>
<span class="normal"><a href="#__codelineno-22-29">29</a></span>
<span class="normal"><a href="#__codelineno-22-30">30</a></span>
<span class="normal"><a href="#__codelineno-22-31">31</a></span>
<span class="normal"><a href="#__codelineno-22-32">32</a></span>
<span class="normal"><a href="#__codelineno-22-33">33</a></span>
<span class="normal"><a href="#__codelineno-22-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">      </span><span class="s">&quot;Controlling complexity is the essence of computer programming.&quot;</span><span class="p">;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">result</span><span class="p">[</span><span class="mi">80</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">  </span><span class="c1">// αντιγραφή των 22 πρώτων χαρακτήρων από το source στο result</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Original=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">);</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">  </span><span class="n">strncpy</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">);</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Partially copied=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">  </span><span class="c1">// συνένωση των πρώτων 5 χαρακτήρων του source στο result</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">  </span><span class="n">strncat</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">          </span><span class="mi">4</span><span class="p">);</span><span class="w"> </span><span class="c1">// συνένωση του &quot; is &quot; στο τέλος του result</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">  </span><span class="n">strncat</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">          </span><span class="mi">12</span><span class="p">);</span><span class="w"> </span><span class="c1">// συνένωση του &quot; programming.&quot; στο τέλος του result</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Concatenated=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">  </span><span class="c1">// σύγκριση τμημάτων λεκτικών</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Comparisons using the first 2 letters of each string:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ABCD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ABEF&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;BCDE&quot;</span><span class="p">};</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23"></a><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">cmp_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strncmp</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmp_result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s and %s are equal.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmp_result</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s is less than %s.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s is greater than %s.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-32"><a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-22-33"><a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-22-34"><a id="__codelineno-22-34" name="__codelineno-22-34"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η κλήση της συνάρτησης <span class="p-style">strncpy()</span> στη γραμμή 10 αντιγράφει τους 22 πρώτους χαρακτήρες από το αλφαριθμητικό <span class="p-style">source</span> στο αλφαριθμητικό <span class="p-style">result</span>, προσθέτοντας και τον χαρακτήρα <span class="p-style">'\0'</span> στη θέση 23. Στη συνέχεια, δύο διαδοχικές κλήσεις της <span class="p-style">strncat()</span> προσθέτουν στο τέλος του αλφαριθμητικού <span class="p-style">result</span> τμήματα του αλφαριθμητικού <span class="p-style">source</span>. Τέλος, για κάθε συνδυασμό ανά δύο των 3 αλφαριθμητικών της γραμμής 20, πραγματοποιείται σύγκριση εξετάζοντας μόνο τους 2 πρώτους χαρακτήρες κάθε αλφαριθμητικού και εμφανίζεται η λεξικογραφική σειρά μεταξύ τους. Η έξοδος του προγράμματος είναι:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>Original=Controlling complexity is the essence of computer programming.
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>Partially copied=Controlling complexity
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>Concatenated=Controlling complexity is programming.
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>Comparisons using the first 2 letters of each string:
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>ABCD and ABCD are equal.
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>ABCD and ABEF are equal.
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>ABCD is less than BCDE.
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>ABEF and ABCD are equal.
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>ABEF and ABEF are equal.
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>ABEF is less than BCDE.
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>BCDE is greater than ABCD.
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>BCDE is greater than ABEF.
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>BCDE and BCDE are equal.
</span></code></pre></div>
<p><i><span class="p-style">Η συνάρτηση strdup()</span></i> Οι <span class="p-style">strdup()</span> και <span class="p-style">strndup()</span> είναι δύο συναρτήσεις που πρόσφατα προστέθηκαν στο <span class="p-style">string.h</span> (με το πρότυπο C23), αν και υποστηρίζονται από τους διαδεδομένους μεταγλωττιστές της C εδώ και πολλά χρόνια. Η <span class="p-style">strdup()</span> επιστρέφει έναν δείκτη σε ένα αλφαριθμητικό που τερματίζεται με <span class="p-style">'\0'</span>, που είναι αντίγραφο του αλφαριθμητικού που δέχεται ως όρισμα. Καθώς ο δείκτης που επιστρέφεται δείχνει προς θέσεις μνήμης που έχουν δεσμευθεί στον σωρό, θα πρέπει να ακολουθεί εντολή απελευθέρωσης της μνήμης, όταν πλέον δεν χρησιμοποιείται. Στον κώδικα 17.12 παρουσιάζεται ένα παράδειγμα χρήσης των συναρτήσεων <span class="p-style">strdup()</span> και <span class="p-style">strndup()</span>. Στη γραμμή 8 ορίζεται μια τοπική μεταβλητή αλφαριθμητικού που παύει να υπάρχει στη γραμμή 12. H <span class="p-style">strdup()</span> δημιουργεί ένα αντίγραφο των περιεχομένων της <span class="p-style">t</span> στον σωρό και επιστρέφει έναν δείκτη που αποθηκεύεται στο <span class="p-style">s1</span>. Παρόμοια, η <span class="p-style">stdndup()</span> δημιουργεί αντίγραφο μόνο των 25 πρώτων χαρακτήρων του <span class="p-style">t</span> στον σωρό. Η συνάρτηση <span class="p-style">strcpy()</span> αντιγράφει το <span class="p-style">t</span> στον πίνακα <span class="p-style">s3</span> που διατηρείται στη στοίβα. Οι γραμμές 16, 17, με δύο κλήσεις της <span class="p-style">free()</span>, απελευθερώνουν τη μνήμη που έχει δεσμευθεί έμμεσα από τις <span class="p-style">strdup()</span> και <span class="p-style">strndup()</span>.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.12: ch17_p12.c - κλήση της συνάρτησης strdup() και της strndup().</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s3</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;First, solve the problem. Then, write the code.&quot;</span><span class="p">;</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">    </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strdup</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="w">    </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strndup</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span><span class="w"> </span><span class="c1">// διπλότυπο των 25 πρώτων χαρακτήρων του t</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">    </span><span class="n">strcpy</span><span class="p">(</span><span class="n">s3</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;string at %p: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;string at %p: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;string at %p: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">s3</span><span class="p">,</span><span class="w"> </span><span class="n">s3</span><span class="p">);</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί η έξοδος της εκτέλεσης του κώδικα. Οι διευθύνσεις που εμφανίζονται, και αφορούν τα αλφαριθμητικά <span class="p-style">s1</span>, <span class="p-style">s2</span> και <span class="p-style">s3</span>, υποδηλώνουν ότι τα <span class="p-style">s1</span> και <span class="p-style">s2</span> βρίσκονται σε διαφορετική περιοχή μνήμης από το <span class="p-style">s3</span> (σωρό και στοίβα αντίστοιχα).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>string at 0x130606b10: First, solve the problem. Then, write the code.
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>string at 0x130606a70: First, solve the problem.
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>string at 0x16ce9ae18: First, solve the problem. Then, write the code.
</span></code></pre></div>
<p><i><span class="p-style">Συναρτήσεις χειρισμού μπλοκ μνήμης</span></i>  Μια χρήσιμη ομάδα συναρτήσεων του <span class="p-style">string.h</span>, που χειρίζονται μπλοκ μνήμης αντί για αλφαριθμητικά, αποτελείται από συναρτήσεις όπως οι <span class="p-style">memset()</span>, <span class="p-style">memcmp()</span> και <span class="p-style">memcpy()</span>. Στον κώδικα 17.13 δίνεται ένα παράδειγμα χρήσης αυτών των συναρτήσεων.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.13: ch17_p13.c - εργασία με αλφαριθμητικά με τις συναρτήσεις memset(), memcpy() και memcmp().</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">source</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Never trust a computer you can&#39;t throw out a window&quot;</span><span class="p">;</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">destination</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">  </span><span class="c1">// αρχικοποίηση του destination με &#39;*&#39;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">  </span><span class="n">memset</span><span class="p">(</span><span class="n">destination</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">79</span><span class="p">);</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">  </span><span class="n">destination</span><span class="p">[</span><span class="mi">79</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;After memset, the destination is:</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">destination</span><span class="p">);</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">  </span><span class="c1">// αντιγραφή δεδομένων από το source στο destination έτσι ώστε το source να</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">  </span><span class="c1">// τοποθετηθεί στη μέση του destination</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">  </span><span class="n">memcpy</span><span class="p">(</span><span class="n">destination</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mi">80</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">source</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">source</span><span class="p">));</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;After memcpy, the destination is:</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">destination</span><span class="p">);</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">  </span><span class="c1">// σύγκριση περιεχομένων θέσεων μνήμης</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;BAD&quot;</span><span class="p">;</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">cmp_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memcmp</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">));</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmp_result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s and %s are equal.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmp_result</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s is less than %s.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s is greater than %s.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί το αποτέλεσμα της εκτέλεσης του κώδικα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>After memset, the destination is:
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>*******************************************************************************
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>After memcpy, the destination is:
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>**************Never trust a computer you can&#39;t throw out a window**************
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>BAD and BAD are equal.
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>BAD is greater than AD.
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>BAD is less than D.
</span></code></pre></div>
<p>Η διαφορά των συναρτήσεων <span class="p-style">memcpy()</span> και <span class="p-style">strcpy()</span> είναι ότι ενώ η <span class="p-style">memcpy()</span> αντιγράφει ένα πλήθος bytes από ένα μπλοκ μνήμης σε ένα άλλο, η <span class="p-style">strcpy()</span> αντιγράφει τα περιεχόμενα ενός αλφαριθμητικού σε ένα άλλο αλφαριθμητικό. Έτσι, ενώ η <span class="p-style">memcpy()</span> εφαρμόζεται σε μπλοκ μνήμης, η <span class="p-style">strcpy()</span> εφαρμόζεται σε αλφαριθμητικά.<br />
Το <span class="p-style">string.h</span> ορίζει και τη συνάρτηση <span class="p-style">memmove(</span> που έχει παρόμοια λειτουργικότητα με τη <span class="p-style">memcpy()</span> καθώς και οι δύο αντιγράφουν ένα μπλοκ μνήμης σε ένα άλλο. Ωστόσο, αν τα δύο αυτά μπλοκ μνήμης επικαλύπτονται τότε μόνο η <span class="p-style">memmove(</span> δίνει εγγυημένα σωστά αποτελέσματα, ενώ η <span class="p-style">memcpy()</span> παρουσιάζει ακαθόριστη συμπεριφορά (undefined behavior).</p>
<h3 id="1714-mathh">17.1.4 math.h</h3>
<p>Το <span class="p-style">math.h</span> περιέχει τριγωνομετρικές συναρτήσεις όπως οι <span class="p-style">sin()</span>, <span class="p-style">cos()</span>, <span class="p-style">tan()</span>, λογαριθμικές συναρτήσεις όπως οι <span class="p-style">log()</span>, <span class="p-style">log10()</span>, και άλλες μαθηματικές συναρτήσεις όπως η <span class="p-style">sqrt()</span>, η <span class="p-style">cbrt()</span> και η <span class="p-style">pow()</span> για υπολογισμό τετραγωνικής ρίζας, κυβικής ρίζας και ύψωσης σε δύναμη αντίστοιχα. Στη συνέχεια θα παρουσιαστούν ορισμένες συναρτήσεις του <span class="p-style">math.h</span> ξεκινώντας με τις συναρτήσεις <span class="p-style">ceil()</span>, <span class="p-style">floor()</span>, <span class="p-style">round()</span> και <span class="p-style">trunc()</span>. Η συνάρτηση <span class="p-style">ceil()</span> δέχεται ως παράμετρο μια πραγματική τιμή <span class="p-style">x</span> και επιστρέφει τον μικρότερο ακέραιο αριθμό που είναι μεγαλύτερος ή ίσος του <span class="p-style">x</span>. Αντίστοιχα, η <span class="p-style">floor()</span> επιστρέφει τον μεγαλύτερο ακέραιο που είναι μικρότερος ή ίσος του <span class="p-style">x</span>. Η <span class="p-style">round()</span> κάνει στρογγυλοποίηση, ενώ η <span class="p-style">trunc()</span> αφαιρεί (truncate) το κλασματικό μέρος. Ο πίνακας 17.1 συνοψίζει τη συμπεριφορά των συναρτήσεων.</p>
<div style="text-align: center;"><b>Πίνακας 17.1:</b><i> Διαφορές μεταξύ των συναρτήσεων ceil(), floor(), trunc() και round().</i></div>

<table>
<thead>
<tr>
<th>Συνάρτηση</th>
<th>Λειτουργία</th>
<th>Αποτέλεσμα για θετικό x</th>
<th>Αποτέλεσμα για αρνητικό x</th>
<th>Παραδείγματα</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="p-style">ceil(x)</span></td>
<td>Στρογγυλοποίηση προς τα πάνω, στον πλησιέστερο ακέραιο</td>
<td>Μικρότερος ακέραιος που είναι μεγαλύτερος ή ίσος του x</td>
<td>Διατήρηση του ακέραιου μέρους</td>
<td><span class="p-style">ceil(2.3)=3.0</span>, <span class="p-style">ceil(-2.3)=-2.0</span></td>
</tr>
<tr>
<td><span class="p-style">floor(x)</span></td>
<td>Στρογγυλοποίηση προς τα κάτω, στον πλησιέστερο ακέραιο</td>
<td>Μεγαλύτερος ακέραιος που είναι μικρότερος ή ίσος του x</td>
<td>Μεγαλύτερος ακέραιος που είναι μικρότερος ή ίσος του x</td>
<td><span class="p-style">floor(2.3)=2.0</span>, <span class="p-style">floor(-2.3)=-3.0</span></td>
</tr>
<tr>
<td><span class="p-style">trunc(x)</span></td>
<td>Αφαίρεση του δεκαδικού μέρους</td>
<td>Αφαίρεση του δεκαδικού μέρους του x</td>
<td>Αφαίρεση του δεκαδικού μέρους του x</td>
<td><span class="p-style">trunc(2.3)=2.0</span>, <span class="p-style">trunc(-2.3)=-2.0</span></td>
</tr>
<tr>
<td><span class="p-style">round(x)</span></td>
<td>Στρογγυλοποίηση προς τον πλησιέστερο ακέραιο</td>
<td>Αν το κλασματικό μέρος &lt; 0.5 τότε προς τα κάτω, αλλιώς προς τα πάνω</td>
<td>Αν το κλασματικό μέρος &lt; 0.5, στρογγυλοποίηση προς τα πάνω, αλλιώς προς τα κάτω</td>
<td><span class="p-style">round(2.3)=2.0</span>, <span class="p-style">round(2.7)=3.0</span>, <span class="p-style">round(-2.3)=-2.0</span>, <span class="p-style">round(-2.7)=-3.0</span></td>
</tr>
</tbody>
</table>
<p>Σχετική είναι και η συνάρτηση <span class="p-style">modf()</span> που χωρίζει μια πραγματική τιμή σε ακέραιο και δεκαδικό μέρος.
Το ακόλουθο πρόγραμμα (κώδικας 17.14) δείχνει τη χρήση αυτών των συναρτήσεων.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.14: ch17_p14.c - παραδείγματα με συναρτήσεις στρογγυλοποίησης, αποκοπής δεκαδικών κ.λπ.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">fun</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trunc</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">integer_part</span><span class="p">,</span><span class="w"> </span><span class="n">fractional_part</span><span class="p">;</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">  </span><span class="n">fractional_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">integer_part</span><span class="p">);</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%5.1f</span><span class="se">\t</span><span class="s">%6.1lf</span><span class="se">\t</span><span class="s">%7.1lf</span><span class="se">\t</span><span class="s">%5.1f</span><span class="se">\t</span><span class="s">%5.1f</span><span class="se">\t</span><span class="s">%12.1f</span><span class="se">\t</span><span class="s">%15.1f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">,</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">         </span><span class="n">integer_part</span><span class="p">,</span><span class="w"> </span><span class="n">fractional_part</span><span class="p">);</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="p">}</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14"></a>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">      </span><span class="s">&quot;    x</span><span class="se">\t</span><span class="s"> floor</span><span class="se">\t</span><span class="s">ceiling</span><span class="se">\t</span><span class="s">round</span><span class="se">\t</span><span class="s">trunc</span><span class="se">\t</span><span class="s">integer_part</span><span class="se">\t</span><span class="s">fractional_part</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">  </span><span class="n">fun</span><span class="p">(</span><span class="mf">2.3</span><span class="p">);</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">  </span><span class="n">fun</span><span class="p">(</span><span class="mf">-2.3</span><span class="p">);</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">  </span><span class="n">fun</span><span class="p">(</span><span class="mf">2.7</span><span class="p">);</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21"></a><span class="w">  </span><span class="n">fun</span><span class="p">(</span><span class="mf">-2.7</span><span class="p">);</span>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί η έξοδος του προγράμματος.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>    x   floor   ceiling round   trunc   integer_part    fractional_part
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>  2.3     2.0       3.0   2.0     2.0            2.0                0.3
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a> ‐2.3    ‐3.0      ‐2.0  ‐2.0    ‐2.0           ‐2.0               ‐0.3
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>  2.7     2.0       3.0   3.0     2.0            2.0                0.7
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a> ‐2.7    ‐3.0      ‐2.0  ‐3.0    ‐2.0           ‐2.0               ‐0.7
</span></code></pre></div>
<p class="annotate">Μια άλλη συνάρτηση του <span class="p-style">math.h</span> είναι η <span class="p-style">fmod()</span>, που υπολογίζει το υπόλοιπο της διαίρεσης δύο αριθμών κινητής υποδιαστολής. Ειδικότερα, όπως αναφέρεται στην τεκμηρίωση της συνάρτησης(1), η <span class="p-style">fmod(x, y)</span> επιστρέφει την τιμή <span class="p-style">𝑥 − 𝑖 ∗ 𝑦</span> για κάποιον ακέραιο <span class="p-style">𝑖</span>τέτοιο ώστε, αν το <span class="p-style">𝑦</span> δεν είναι μηδενικό, το αποτέλεσμα να έχει το ίδιο πρόσημο με το <span class="p-style">𝑥</span> και τιμή μικρότερη ή ίση της τιμής του <span class="p-style">𝑦</span>. Υπενθυμίζεται ότι η ακέραια διαίρεση και το ακέραιο υπόλοιπο της διαίρεσης, υπολογίζονται μέσω των τελεστών <span class="p-style">/</span> και <span class="p-style">%</span>, όταν οι τελεστέοι είναι ακέραιοι. Στο ακόλουθο παράδειγμα (κώδικας 17.15) φαίνεται η χρήση της <span class="p-style">fmod()</span>.</p>
<ol>
<li>Η εμφάνιση της περιγραφής της λειτουργίας της συνάρτησης <span class="p-style">fmod()</span> γίνεται με την εντολή “man fmod” στη γραμμή εντολών σε συστήματα Linux ή MacOS.</li>
</ol>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.15: ch17_p15.c - υπόλοιπο διαίρεσης δύο πραγματικών αριθμών για διαίρεση με ακέραιο πηλίκο.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.4</span><span class="p">;</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fmod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value %.1f fits %d times in %.1f and the remainder is %.1f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">         </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Το πρόγραμμα κατά την εκτέλεσή του θα εμφανίσει:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>The value 4.4 fits 2 times in 10.0 and the remainder is 1.2
</span></code></pre></div>
<p>Οι τριγωνομετρικές συναρτήσεις του <span class="p-style">math.h</span> αποτελούν μια ακόμη κατηγορία συναρτήσεών του. Πέρα από τις συναρτήσεις <span class="p-style">sin()</span>, <span class="p-style">cos()</span>, <span class="p-style">tan()</span> για ημίτονο, συνημίτονο και εφαπτομένη, που αναφέρθηκαν ήδη, υπάρχουν οι συναρτήσεις <span class="p-style">asin()</span>, <span class="p-style">acos()</span>, <span class="p-style">atan()</span> και <span class="p-style">atan2()</span>, που υπολογίζουν τόξα τριγωνομετρικών συναρτήσεων. Οι τριγωνομετρικές συναρτήσεις δέχονται ως ορίσματα γωνίες κύκλων σε ακτίνια (radians), οπότε αν οι διαθέσιμες τιμές είναι σε μοίρες (degrees) τότε θα πρέπει πρώτα να μετατραπούν. Η μετατροπή γίνεται με βάση την εξίσωση <span class="p-style">1𝜋 = 180∘</span>, από όπου προκύπτει ότι η μετατροπή μοιρών σε ακτίνια γίνεται πολλαπλασιάζοντας τις μοίρες επί 0.0174532925, ενώ η μετατροπή ακτινίων σε μοίρες γίνεται πολλαπλασιάζοντας τα ακτίνια επί 57.2957795. Ο κώδικας 17.16 είναι ένα παράδειγμα χρήσης τριγωνομετρικών συναρτήσεων.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.16: ch17_p16.c - εμφάνιση τιμών ημιτόνου, συνημιτόνου και εφαπτομένης για τις γωνίες: 𝜋, 𝜋/2 , 𝜋/3 , 𝜋/4 , 𝜋/6 .</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">pi</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">6</span><span class="p">};</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%lf(rad)=%3.0lf(deg): sin=%+lf, cos=%+lf, tan=%+lf</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">           </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">57.2957795</span><span class="p">,</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="w"> </span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί η έξοδος του προγράμματος:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>3.141593(rad)=180(deg): sin=+0.000000, cos=‐1.000000, tan=‐0.000000
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>1.570796(rad)= 90(deg): sin=+1.000000, cos=+0.000000, tan=+16331239353195370.000000
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>1.047198(rad)= 60(deg): sin=+0.866025, cos=+0.500000, tan=+1.732051
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>0.785398(rad)= 45(deg): sin=+0.707107, cos=+0.707107, tan=+1.000000
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>0.523599(rad)= 30(deg): sin=+0.500000, cos=+0.866025, tan=+0.577350
</span></code></pre></div>
<p>Στη γραμμή 5, η τιμή του <span class="p-style">𝜋</span> λαμβάνεται με το τόξο συνημιτόνου του -1. Η κλήση <span class="p-style">acos(‐1)</span> επιστρέφει σε ακτίνια τη γωνία που το συνημίτονό της είναι -1, δηλαδή τη γωνία <span class="p-style">𝜋</span>. Η τιμή <span class="p-style">𝜋</span> θα μπορούσε επίσης να ληφθεί με την έκφραση <span class="p-style">4.0 * atan(1.0)</span>, καθώς η εφαπτομένη των <span class="p-style">𝜋/4 = 45∘</span> είναι 1.0, ή με τη σταθερά <span class="p-style">M_PI</span> της <span class="p-style">math.h</span> (προστέθηκε με το πρότυπο C99). Ένα ακόμα σημείο με ενδιαφέρον στα αποτελέσματα είναι ότι η τιμή της εφαπτομένης που εμφανίζεται για τις <span class="p-style">𝜋/2 = 90∘</span> είναι μια πολύ μεγάλη τιμή. Τυπικά, θα έπρεπε να υπήρχε κάποιος έλεγχος ξεχωριστά για την περίπτωση αυτή και όχι να εμφανίζεται μια αυθαίρετα μεγάλη τιμή. Ας σημειωθεί ότι καθώς η γωνία <span class="p-style">𝜋/2</span> προσεγγίζεται από αριστερά (δηλαδή από μικρότερες τιμές), η τιμή της εφαπτομένης προσεγγίζει το <span class="p-style">-∞</span>, ενώ όταν αυτό συμβαίνει από δεξιά (δηλαδή από μεγαλύτερες τιμές) η τιμή της εφαπτομένης προσεγγίζει το <span class="p-style">+∞</span>. Αυτό φαίνεται στον κώδικα 17.17.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.17: ch17_p17.c - τιμές της εφαπτομένης καθώς η τιμή μιας γωνίας προσεγγίζει από δεξιά και από αριστερά τις 90∘.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">-0.1</span><span class="p">,</span><span class="w">    </span><span class="mf">-0.01</span><span class="p">,</span><span class="w">  </span><span class="mf">-0.001</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.0001</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.00001</span><span class="p">,</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">                </span><span class="mf">0.00001</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">  </span><span class="mf">0.01</span><span class="p">,</span><span class="w">    </span><span class="mf">0.1</span><span class="p">};</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%lf(rad)=%lf(deg): tan=%+.5lf</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="w">           </span><span class="p">(</span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">57.2957795</span><span class="p">,</span><span class="w"> </span><span class="n">tan</span><span class="p">(</span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθούν τα αποτελέσματα εκτέλεσης του κώδικα:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>1.470796(rad)=84.270422(deg): tan=+9.96664
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>1.560796(rad)=89.427042(deg): tan=+99.99667
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>1.569796(rad)=89.942704(deg): tan=+999.99967
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>1.570696(rad)=89.994270(deg): tan=+9999.99997
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>1.570786(rad)=89.999427(deg): tan=+100000.00000
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>1.570806(rad)=90.000573(deg): tan=‐100000.00000
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>1.570896(rad)=90.005730(deg): tan=‐9999.99997
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>1.571796(rad)=90.057296(deg): tan=‐999.99967
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>1.580796(rad)=90.572958(deg): tan=‐99.99667
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>1.670796(rad)=95.729578(deg): tan=‐9.96664
</span></code></pre></div>
<p>Οι τριγωνομετρικές συναρτήσεις τυπικά δέχονται ορίσματα <span class="p-style">double</span> και επιστρέφουν τιμές <span class="p-style">double</span>. Από το πρότυπο C99 και μετά υπάρχουν οι τριγωνομετρικές συναρτήσεις με ονόματα που τελειώνουν σε <span class="p-style">f</span> και σε <span class="p-style">l</span>, όπως για παράδειγμα οι <span class="p-style">sinf()</span>, <span class="p-style">sinl()</span>, που δέχονται ως ορίσματα, αλλά και επιστρέφουν <span class="p-style">float</span> και <span class="p-style">long</span> <span class="p-style">double</span> τιμές αντίστοιχα, αντί για <span class="p-style">double</span>. Επίσης, με το πρότυπο C99 προστέθηκε το <span class="p-style">tgmath.h</span> που ορίζει μακροεντολές όπως η <span class="p-style">sin</span> που παρέχουν γενερική (generic) πρόσβαση στις τριγωνομετρικές συναρτήσεις, καλώντας την κατάλληλη συνάρτηση ανάλογα με τον τύπο των ορισμάτων. Ο κώδικας 17.18 αποτελεί ένα παράδειγμα χρήσης αυτών των συναρτήσεων.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.18: ch17_p18.c - χρήση της μακροεντολής sin για κλήση της κατάλληλης συνάρτησης με βάση τον τύπο του ορίσματος.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;tgmath.h&gt;</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">angle_in_deg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">65.155</span><span class="p">;</span><span class="w"> </span><span class="c1">// γωνία σε μοίρες</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">angle_in_rad</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">      </span><span class="n">angle_in_deg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="mf">-1.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">180.0</span><span class="p">;</span><span class="w"> </span><span class="c1">// γωνία σε ακτίνια (double)</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">angle_in_rad_f</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">      </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">angle_in_deg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="mf">-1.0F</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">180.0F</span><span class="p">;</span><span class="w"> </span><span class="c1">// γωνία σε ακτίνια (float)</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">  </span><span class="kt">long</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">angle_in_rad_Lf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="kt">double</span><span class="p">)</span><span class="n">angle_in_deg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="mf">-1.0L</span><span class="p">)</span><span class="w"> </span><span class="o">/</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">                                </span><span class="mf">180.0L</span><span class="p">;</span><span class="w"> </span><span class="c1">// γωνία σε ακτίνια (long double)</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">  </span><span class="c1">// χρήση macro sin από το &lt;tgmath.h&gt;</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;sinf(%.9f) using macro=%.9f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">angle_in_rad_f</span><span class="p">,</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle_in_rad_f</span><span class="p">));</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;sin(%.17lf) using macro=%.17lf</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">angle_in_rad</span><span class="p">,</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle_in_rad</span><span class="p">));</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;sinl(%.21Lf) using macro=%.21Lf</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">angle_in_rad_Lf</span><span class="p">,</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">         </span><span class="n">sin</span><span class="p">(</span><span class="n">angle_in_rad_Lf</span><span class="p">));</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η έξοδος του προγράμματος είναι η ακόλουθη:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>sinf(1.137169242) using macro=0.907447755
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>sin(1.13716927413690527) using macro=0.90744776169021168
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>sinl(1.137169274136905272599) using macro=0.907447761690211684993
</span></code></pre></div>
<p>Στις γραμμές 14-17 εκτελείται τρεις φορές η μακροεντολή <span class="p-style">sin</span> και με βάση το όρισμα που δέχεται, καλεί την κατάλληλη συνάρτηση ανάμεσα στις <span class="p-style">sinf()</span>, <span class="p-style">sin()</span> και <span class="p-style">sinl()</span>.</p>
<h3 id="1715-timeh">17.1.5 time.h</h3>
<p>Το αρχείο επικεφαλίδας <span class="p-style">time.h</span> ορίζει διάφορους τύπους δεδομένων σχετικούς με τον χρόνο, όπως τον <span class="p-style">time_t</span>, τον <span class="p-style">clock_t</span> και τον <span class="p-style">struct tm</span>, που θα παρουσιαστούν στη συνέχεια μαζί με συναρτήσεις που τους χρησιμοποιούν και παραδείγματα.<br />
Ο τύπος δεδομένων <span class="p-style">time_t</span> σε συστήματα που υποστηρίζουν το POSIX, είναι ένας ακέραιος τύπος με εύρος τιμών ικανό να αναπαραστήσει το πλήθος δευτερολέπτων που έχουν παρέλθει από το λεγόμενο epoch που είναι η 1η Ιανουαρίου του 1970 στις 00:00:00 UTC (Coordinated Universal Time). Η συνάρτηση <span class="p-style">time()</span> μπορεί να χρησιμοποιηθεί για να επιστραφεί το πλήθος των δευτερολέπτων της τρέχουσας χρονικής στιγμής από το epoch, ενώ οι συναρτήσεις <span class="p-style">difftime()</span> και <span class="p-style">ctime()</span> χρησιμοποιούνται για τον υπολογισμό της απόστασης σε δευτερόλεπτα ανάμεσα σε δύο τιμές τύπου <span class="p-style">time_t</span> και για την εμφάνιση τιμών τύπου <span class="p-style">time_t</span> ως αλφαριθμητικά χρονικών στιγμών (ημερομηνία και ώρα) αντίστοιχα. Στο ακόλουθο παράδειγμα (κώδικας 17.19) χρησιμοποιούνται οι συναρτήσεις που αναφέρθηκαν και η συνάρτηση <span class="p-style">sleep()</span> που προκαλεί παύση της εκτέλεσης για ένα διάστημα που δίνεται σε δευτερόλεπτα. Η συνάρτηση <span class="p-style">sleep()</span> ορίζεται στο αρχείο επικεφαλίδας <span class="p-style">unistd.h</span>.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.19: ch17_p19.c - χρήση της συνάρτησης sleep() για προσωρινή παύση εκτέλεσης.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">  </span><span class="kt">time_t</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span><span class="w"> </span><span class="c1">// τρέχουσα χρονική στιγμή</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">s_t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t1</span><span class="p">);</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Time1: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s_t1</span><span class="p">);</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">  </span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// παύση εκτέλεσης για 2 δευτερόλεπτα</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">  </span><span class="kt">time_t</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span><span class="w"> </span><span class="c1">// τρέχουσα χρονική στιγμή</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">s_t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t2</span><span class="p">);</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Time2: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s_t2</span><span class="p">);</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">time_elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">difftime</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="n">t1</span><span class="p">);</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Time gap between prints: %d seconds</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">time_elapsed</span><span class="p">);</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί ένα αποτέλεσμα εκτέλεσης:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>Time1: Sun Jul 23 16:58:01 2023
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>Time2: Sun Jul 23 16:58:03 2023
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>Time gap between prints: 2 seconds
</span></code></pre></div>
<p>Ο τύπος <span class="p-style">clock_t</span> μπορεί να χρησιμοποιηθεί για να αποθηκεύσει μια τιμή ανάλογη του πλήθους των χτύπων (ticks) του ρολογιού από την αρχή εκτέλεσης του προγράμματος μέχρι το σημείο όπου καλείται η συνάρτηση <span class="p-style">clock()</span>. Ως χτύπος ρολογιού μπορεί να θεωρηθεί ότι είναι ο χρόνος που απαιτείται για να εκτελεστεί μια μικροεντολή στην ΚΜΕ (Κεντρική Μονάδα Επεξεργασίας). Για να μετατραπεί η τιμή που επιστρέφει η <span class="p-style">clock()</span> σε χρόνο διαιρείται με τη σταθερά <span class="p-style">CLOCKS_PER_SEC</span>, οπότε επιστρέφεται μια δεκαδική τιμή που αναπαριστά δευτερόλεπτα. Ο τύπος <span class="p-style">clock_t</span> χρησιμοποιείται συχνά για να μετρήσει τον χρόνο εκτέλεσης κώδικα ανάμεσα σε δύο σημεία ενδιαφέροντος στον κώδικα. Ένα σχετικό παράδειγμα παρουσιάζεται στον κώδικα 17.20 που ακολουθεί:</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.20: ch17_p20.c - χρονομέτρηση κώδικα.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span>
<span class="normal"><a href="#__codelineno-40-20">20</a></span>
<span class="normal"><a href="#__codelineno-40-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="kt">clock_t</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span><span class="w"> </span><span class="n">end_time</span><span class="p">;</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">elapsed_time</span><span class="p">;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">  </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clock</span><span class="p">();</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">  </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">100000000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">  </span><span class="n">end_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clock</span><span class="p">();</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14"></a>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15"></a><span class="w">  </span><span class="n">elapsed_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">CLOCKS_PER_SEC</span><span class="p">;</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;CLOCKS_PER_SEC=%lu, start=%lu, end=%lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CLOCKS_PER_SEC</span><span class="p">,</span><span class="w"> </span><span class="n">start_time</span><span class="p">,</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="w">         </span><span class="n">end_time</span><span class="p">);</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Result=%lld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">);</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Elapsed time=%.6f seconds</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">elapsed_time</span><span class="p">);</span>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί ένα αποτέλεσμα εκτέλεσης. Ας σημειωθεί ότι η σταθερά <span class="p-style">CLOCKS_PER_SEC</span> έχει την προκαθορισμένη τιμή 1000000, ανεξάρτητα του υλικού του συστήματος που εκτελεί τον κώδικα.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>CLOCKS_PER_SEC=1000000, start=3664, end=122949
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>Result=5000000050000000
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>Elapsed time=0.119285 seconds
</span></code></pre></div>
<p>Ένας άλλος τύπος δεδομένων του <span class="p-style">time.h</span>, που επιτρέπει τον χειρισμό ημερομηνιών και ωρών, είναι η δομή <span class="p-style">struct tm</span> που παρατίθεται στη συνέχεια:</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">tm</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_sec</span><span class="p">;</span><span class="w"> </span><span class="c1">// δευτερόλεπτα , 0‐59</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_min</span><span class="p">;</span><span class="w"> </span><span class="c1">// λεπτά, 0‐59</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_hour</span><span class="p">;</span><span class="w"> </span><span class="c1">// ώρες, 0‐23</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_mday</span><span class="p">;</span><span class="w"> </span><span class="c1">// ημέρα μήνα, 1‐31</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_mon</span><span class="p">;</span><span class="w"> </span><span class="c1">// μήνας, 0‐11</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_year</span><span class="p">;</span><span class="w"> </span><span class="c1">// πλήθος ετών από το 1900</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_wday</span><span class="p">;</span><span class="w"> </span><span class="c1">// ημέρα εβδομάδας από την Κυριακή , 0‐6</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_yday</span><span class="p">;</span><span class="w"> </span><span class="c1">// πλήθος ημερών από 1η Ιανουαρίου , 0‐365</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="kt">int</span><span class="w"> </span><span class="n">tm_isdst</span><span class="p">;</span><span class="w"> </span><span class="c1">// &gt; 0 για θερινή ώρα, 0 για χειμερινή , &lt; 0 για μη διαθέσιμη πληροφορία</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="p">};</span>
</span></code></pre></div>
<p class="annotate">Υπάρχουν διάφορες συναρτήσεις που χρησιμοποιούν το <span class="p-style">struct tm</span>, όπως η <span class="p-style">gmtime()</span>, η <span class="p-style">localtime()</span>, η <span class="p-style">asctime()</span> και η <span class="p-style">strftime()</span>. Η <span class="p-style">gmtime()</span> μετατρέπει μια τιμή <span class="p-style">time_t</span> σε <span class="p-style">struct tm</span>, όπως και η <span class="p-style">locatime()</span> με τη διαφορά ότι η πρώτη κάνει τη μετατροπή σε UTC χρόνο, ενώ η δεύτερη σε τοπικό χρόνο. Ο κώδικας 17.21 αποτελεί ένα παράδειγμα όπου λαμβάνεται η τρέχουσα ημέρα και ώρα κατά την εκτέλεση ως <span class="p-style">time_t</span> και μετατρέπεται με τη <span class="p-style">gmtime()</span> σε <span class="p-style">struct tm</span>. Στη συνέχεια μετατρέπεται με την <span class="p-style">asctime()</span> η <span class="p-style">struct tm</span> σε αλφαριθμητικό ημερομηνίας και ώρας προκειμένου να εμφανιστεί. Μετά, προστίθεται 1 ημέρα και 10 ώρες στη δομή και μετατρέπεται σε <span class="p-style">time_t</span>, πριν τελικά μετατραπεί ξανά με τη <span class="p-style">gmtime()</span> σε <span class="p-style">struct tm</span>. Αυτή η διπλή μετατροπή γίνεται προκειμένου να περιοριστούν οι τιμές των επιμέρους πεδίων του <span class="p-style">struct tm</span> σε έγκυρες τιμές (π.χ. να μην υπάρχει τιμή μεγαλύτερη του 23 για τις ώρες). Τέλος, χρησιμοποιείται η συνάρτηση <span class="p-style">strftime()</span> για να τοποθετηθεί σε έναν πίνακα χαρακτήρων το αλφαριθμητικό εξόδου με την ημερομηνία και ώρα. Η <span class="p-style">strftime()</span> χρησιμοποιεί ως τρίτο στη σειρά όρισμα ένα αλφαριθμητικό που καθορίζει με ειδικούς κωδικούς μορφοποίησης(1) τη μορφή που θα έχει το αποτέλεσμα.</p>
<ol>
<li><a href="https://en.cppreference.com/w/c/chrono/strftime" target="_blank">https://en.cppreference.com/w/c/chrono/strftime</a></li>
</ol>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.21: ch17_p21.c - προσθήκη ενός χρονικού διαστήματος σε μια ημερομηνία και εμφάνιση της νέας  ημερομηνίας.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-43-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-43-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-43-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-43-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-43-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-43-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-43-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-43-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-43-10">10</a></span>
<span class="normal"><a href="#__codelineno-43-11">11</a></span>
<span class="normal"><a href="#__codelineno-43-12">12</a></span>
<span class="normal"><a href="#__codelineno-43-13">13</a></span>
<span class="normal"><a href="#__codelineno-43-14">14</a></span>
<span class="normal"><a href="#__codelineno-43-15">15</a></span>
<span class="normal"><a href="#__codelineno-43-16">16</a></span>
<span class="normal"><a href="#__codelineno-43-17">17</a></span>
<span class="normal"><a href="#__codelineno-43-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">  </span><span class="kt">time_t</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">tm</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gmtime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">now</span><span class="p">);</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;UTC time=%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">asctime</span><span class="p">(</span><span class="n">t</span><span class="p">));</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8"></a><span class="w">  </span><span class="c1">// 1 ημέρα + 10 ώρες μετά</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9"></a><span class="w">  </span><span class="n">t</span><span class="o">-&gt;</span><span class="n">tm_mday</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10"></a><span class="w">  </span><span class="n">t</span><span class="o">-&gt;</span><span class="n">tm_hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="o">-&gt;</span><span class="n">tm_hour</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11"></a><span class="w">  </span><span class="c1">// μετατροπή σε time_t για κανονικοποίηση ημερομηνίας</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12"></a><span class="w">  </span><span class="kt">time_t</span><span class="w"> </span><span class="n">future_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">timegm</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13"></a><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gmtime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">future_time</span><span class="p">);</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">s</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15"></a><span class="w">  </span><span class="n">strftime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%A %c&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;UTC time(+1day, 10hours)=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Ακολουθεί ένα αποτέλεσμα εκτέλεσης. Το ίδιο παράδειγμα θα μπορούσε να χρησιμοποιεί την τοπική ώρα αν όλες οι κλήσεις της <span class="p-style">gmtime()</span> είχαν αντικατασταθεί με κλήσεις της <span class="p-style">localtime()</span>.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>UTC time=Sun Jul 23 16:00:41 2023
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>UTC time(+1day, 10hours)=Tuesday Tue Jul 25 02:00:41 2023
</span></code></pre></div>
<h2 id="172-c">17.2 Εξωτερικές βιβλιοθήκες της C</h2>
<p class="annotate">Ένα μεγάλο πλεονέκτημα της C είναι η πληθώρα βιβλιοθηκών που υπάρχουν για την εξυπηρέτηση διαφόρων αναγκών όπως δημιουργία γραφικών διεπαφών (π.χ. GTK+, IUP), προχωρημένες δυνατότητες μαθηματικών (π.χ. GSL, BLAS, GMP), αλληλεπίδραση με βάσεις δεδομένων (π.χ. SQLite), γραφικά (π.χ. SDL, SIGIL), επικοινωνίες (π.χ. libcurl, ZeroMQ) και άλλα. Μια λίστα με εξωτερικές βιβλιοθήκες ανοικτού κώδικα της C μπορεί να εντοπιστεί στο <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>. Επίσης, σελίδες τύπου awesome(1) όπως η <sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> περιέχουν συνδέσμους προς βιβλιοθήκες και άλλα ενδιαφέροντα θέματα σχετικά με τη C, οργανωμένα σε κατηγορίες.</p>
<ol>
<li><a href="https://github.com/topics/awesome-list" target="_blank">https://github.com/topics/awesome-list</a> </li>
</ol>
<p>Στη συνέχεια θα παρουσιαστεί ένα παράδειγμα εγκατάστασης και χρήσης της εξωτερικής βιβλιοθήκης GSL. Υπάρχουν διάφοροι τρόποι για την εγκατάσταση βιβλιοθηκών της C, που εξαρτώνται από το λειτουργικό σύστημα και την ίδια τη βιβλιοθήκη. Για παράδειγμα υπάρχουν βιβλιοθήκες που είναι “header only” που σημαίνει ότι αρκεί να μεταφορτωθεί ένα αρχείο επικεφαλίδας και στη συνέχεια απλά να γίνει include έτσι ώστε να χρησιμοποιηθεί η βιβλιοθήκη στον κώδικα. Ωστόσο, συχνότερα, οι βιβλιοθήκες πρέπει να εγκαθίστανται προκειμένου να χρησιμοποιηθούν. Στο Linux υπάρχουν οι λεγόμενοι διαχειριστές πακέτων (package managers), που επιτρέπουν την εγκατάσταση βιβλιοθηκών και άλλων λογισμικών. Έτσι, η βιβλιοθήκη GSL μπορεί να εγκατασταθεί, για παράδειγμα, σε μια διανομή Ubuntu, με την ακόλουθη εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>$ sudo apt‐get install libgsl‐dev
</span></code></pre></div>
<p>Αυτό που συμβαίνει με μια τέτοια εντολή είναι ότι αντιγράφονται στον υπολογιστή όλα τα απαιτούμενα αρχεία της βιβλιοθήκης GSL, και το λειτουργικό σύστημα ενημερώνεται για τις θέσεις των αρχείων επικεφαλίδας και των δυαδικών αρχείων της βιβλιοθήκης. Η εγκατάσταση της βιβλιοθήκης σε MacOS μπορεί να γίνει με παρόμοιο τρόπο, εφόσον πρώτα εγκατασταθεί ένας διαχειριστής πακέτων όπως ο HomeBrew ή ο MacPorts. Στα Windows η εγκατάσταση δεν είναι το ίδιο εύκολη καθώς δεν διατίθεται επίσημος διαχειριστής πακέτων και οι λύσεις που προτείνονται, όπως το chocolatey, προσφέρουν δυνατότητα εγκατάστασης μόνο για κάποιες βιβλιοθήκες και λογισμικά. Για να γεφυρωθούν οι διαφορές στον τρόπο εγκατάστασης των εξωτερικών βιβλιοθηκών ανάμεσα στα διάφορα λειτουργικά συστήματα και τις εκδόσεις τους, μπορεί να χρησιμοποιηθεί το λογισμικό vcpkg (<a href="https://github.com/microsoft/vcpkg" target="_blank">https://github.com/microsoft/vcpkg</a>)<br />
Το vcpkg είναι ένα σύστημα διαχείρισης εγκαταστάσεων βιβλιοθηκών για τη C και τη C++. Έχει αναπτυχθεί από τη Microsoft και επιτρέπει την αυτοματοποίηση της λήψης, της μεταγλώττισης και σύνδεσης (build), καθώς και της εγκατάστασης βιβλιοθηκών C και C++ σε συστήματα Windows, Linux και MacOS. Ο σκοπός του είναι να απλοποιήσει τη διαδικασία ανάπτυξης λογισμικού με αυτοματοποίηση της διαχείρισης εγκατάστασης βιβλιοθηκών.<br />
Οι οδηγίες εγκατάστασης του vcpkg βρίσκονται στο <a href="https://vcpkg.io/en/getting‐started.html" target="_blank">https://github.com/microsoft/vcpkg</a>. Από τη στιγμή που έχει εγκατασταθεί η εγκατάσταση των βιβλιοθηκών γίνεται με εντολές της μορφής:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>$ vcpkg install [βιβλιοθήκη προς εγκατάσταση]
</span></code></pre></div>
<p>Για παράδειγμα, η βιβλιοθήκη GSL εγκαθίσταται με την εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>$ vcpkg install gsl
</span></code></pre></div>
<p>Το vcpkg ανιχνεύει το υπολογιστικό σύστημα στο οποίο εκτελείται και εγκαθιστά την κατάλληλη έκδοση της βιβλιοθήκης. Το vcpkg χρησιμοποιεί τις λεγόμενες τριάδες (triplets) στη διαχείριση των διαφορετικών διαμορφώσεων κατά την εγκατάσταση των βιβλιοθηκών. Κάθε τριάδα αντιπροσωπεύει μια πλατφόρμα, αρχιτεκτονική και πρόσθετες ρυθμίσεις. Για παράδειγμα η τριάδα <span class="p-style">x64‐linux‐dynamic</span> σημαίνει ότι η αρχιτεκτονική της πλατφόρμας είναι 64 bits, το λειτουργικό σύστημα είναι linux και θα δημιουργηθεί βιβλιοθήκη για δυναμική σύνδεση. Συνεπώς, η βιβλιοθήκη GSL θα μπορούσε να είχε εγκατασταθεί και με την ακόλουθη εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>$ vcpkg install gsl:x64‐linux‐dynamic
</span></code></pre></div>
<p>Για να μπορεί να χρησιμοποιηθεί η βιβλιοθήκη GSL θα πρέπει να οριστούν κατά τη μεταγλώττιση και σύνδεση μέσω των διακοπτών <span class="p-style">‐I</span> και <span class="p-style">‐L</span> οι κατάλληλες διαδρομές προς τα αρχεία επικεφαλίδας και τα δυαδικά αρχεία της βιβλιοθήκης. Στο παράδειγμα του κώδικα 17.22 χρησιμοποιείται η δυνατότητα της GSL να δημιουργεί όλες τις μεταθέσεις (permutations) των στοιχείων ενός συνόλου.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Κώδικας 17.22: ch17_p22.c - παραγωγή όλων των μεταθέσεων ενός συνόλου αλφαριθμητικών, με την εξωτερική βιβλιοθήκη GSL.</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span>
<span class="normal"><a href="#__codelineno-49-18">18</a></span>
<span class="normal"><a href="#__codelineno-49-19">19</a></span>
<span class="normal"><a href="#__codelineno-49-20">20</a></span>
<span class="normal"><a href="#__codelineno-49-21">21</a></span>
<span class="normal"><a href="#__codelineno-49-22">22</a></span>
<span class="normal"><a href="#__codelineno-49-23">23</a></span>
<span class="normal"><a href="#__codelineno-49-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gsl/gsl_permutation.h&gt;</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">print_permutation</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">gsl_permutation</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">names</span><span class="p">[],</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="p">[</span><span class="n">gsl_permutation_get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)]);</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="p">}</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10"></a>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">names</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Charlie&quot;</span><span class="p">};</span>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">names</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14"></a>
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">  </span><span class="n">gsl_permutation</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsl_permutation_alloc</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="w">  </span><span class="n">gsl_permutation_init</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
</span><span id="__span-49-17"><a id="__codelineno-49-17" name="__codelineno-49-17"></a>
</span><span id="__span-49-18"><a id="__codelineno-49-18" name="__codelineno-49-18"></a><span class="w">  </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-19"><a id="__codelineno-49-19" name="__codelineno-49-19"></a><span class="w">    </span><span class="n">print_permutation</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">names</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
</span><span id="__span-49-20"><a id="__codelineno-49-20" name="__codelineno-49-20"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">gsl_permutation_next</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GSL_SUCCESS</span><span class="p">);</span>
</span><span id="__span-49-21"><a id="__codelineno-49-21" name="__codelineno-49-21"></a>
</span><span id="__span-49-22"><a id="__codelineno-49-22" name="__codelineno-49-22"></a><span class="w">  </span><span class="n">gsl_permutation_free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
</span><span id="__span-49-23"><a id="__codelineno-49-23" name="__codelineno-49-23"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-49-24"><a id="__codelineno-49-24" name="__codelineno-49-24"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Η μεταγλώττιση του κώδικα θα γίνει με τις ακόλουθες εντολές μεταγλώττισης ανά περίπτωση. Σε Windows, υποθέτοντας ότι ο χρήστης του συστήματος έχει όνομα <span class="p-style">a_user</span> και ότι το vcpkg έχει εγκατασταθεί στον κατάλογο <span class="p-style">c:\Users\a_user</span>, η μεταγλώττιση θα πρέπει να γίνει με την ακόλουθη εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>&gt; gcc ch17_p22.c ‐IC:\Users\a_user\vcpkg\installed\x64‐windows\include
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>    ↪ ‐LC:\Users\a_user\vcpkg\installed\x64‐windows\lib ‐lgsl ‐lgslcblas ‐lm
</span></code></pre></div>
<p>Στα Windows θα πρέπει να τοποθετηθούν τα αρχεία <span class="p-style">gsl.dll</span> και <span class="p-style">gslcblas.dll</span> στον ίδιο κατάλογο με το εκτελέσιμο. Τα αρχεία αυτά έχουν δημιουργηθεί κατά την εγκατάσταση και βρίσκονται στη διαδρομή <span class="p-style">C:\Users\a_user\vcpkg\installed\x64‐windows\bin</span>. Εναλλακτικά, αυτή η διαδρομή μπορεί να προστεθεί στο <span class="p-style">PATH</span>, οπότε δεν θα απαιτούνταν η αντιγραφή των αρχείων <span class="p-style">gsl.dll</span> και <span class="p-style">gslcblas.dll</span>.<br />
Σε Linux υποθέτοντας ότι ο χρήστης του συστήματος έχει όνομα <span class="p-style">a_user</span> και ότι το vcpkg έχει εγκατασταθεί στον γονικό κατάλογο (<span class="p-style">/home/a_user</span>), η μεταγλώττιση θα πρέπει να γίνει με την ακόλουθη εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>$ gcc ch17_p22.c ‐I/home/a_user/vcpkg/installed/x64‐linux/include
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>    ↪ ‐L/home/a_user/vcpkg/installed/x64‐linux/lib ‐lgsl ‐lgslcblas ‐lm
</span></code></pre></div>
<p>Σε MacOS (αρχιτεκτονικής arm64) υποθέτοντας ότι ο χρήστης του συστήματος έχει όνομα <span class="p-style">a_user</span> και ότι το vcpkg έχει εγκατασταθεί στον γονικό κατάλογο (<span class="p-style">/Users/a_user</span>), η μεταγλώττιση θα πρέπει να γίνει με την ακόλουθη εντολή:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>$ gcc ch17_p22.c ‐I/Users/a_user/vcpkg/installed/arm64‐osx/include/
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>    ↪ ‐L/Users/a_user/vcpkg/installed/arm64‐osx/lib ‐lgsl ‐lgslcblas ‐lm
</span></code></pre></div>
<p>Τα αποτελέσματα εκτέλεσης θα είναι και στις 3 περιπτώσεις τα ακόλουθα:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>Alice Bob Charlie
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>Alice Charlie Bob
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>Bob Alice Charlie
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>Bob Charlie Alice
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>Charlie Alice Bob
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>Charlie Bob Alice
</span></code></pre></div>
Αξίζει να σημειωθεί ότι το vcpkg συνεργάζεται καλά με το CMAKE καθώς και με το pkg-config. Η ανάπτυξη των συγκεκριμένων δυνατοτήτων του vcpkg είναι εκτός του αντικειμένου του παρόντος συγγράμματος.</p>
<h2 id="173">17.3 Ασκήσεις</h2>
<p><strong><em>Άσκηση 1</em></strong><br />
Γράψτε ένα πρόγραμμα που ο χρήστης θα προσπαθεί να εντοπίσει, με τον μικρότερο αριθμό προσπαθειών, έναν ακέραιο αριθμό, που θα έχει δημιουργηθεί τυχαία σε ένα εύρος τιμών (π.χ. 1 έως 100). Το πρόγραμμα θα ζητά από τον χρήστη να μαντέψει τον αριθμό και σε περίπτωση αποτυχίας θα εμφανίζει μήνυμα σχετικά με το εάν ο αριθμός που επιλέχθηκε είναι μικρότερος ή μεγαλύτερος από τον αριθμό που αναζητείται. Όταν ο χρήστης πετύχει τον αριθμό, το πρόγραμμα θα σταματά και θα εμφανίζει το πλήθος των προσπαθειών που χρειάστηκαν για τον εντοπισμό του.</p>
<p><strong><em>Άσκηση 2</em></strong><br />
Γράψτε ένα πρόγραμμα που να ζητά από τον χρήστη να εισάγει δύο ημερομηνίες, σε μορφή έτους, μήνα, ημέρας. Το πρόγραμμα να μετατρέπει τις ημερομηνίες σε <span class="p-style">time_t</span>, να υπολογίζει τη διαφορά τους σε ημέρες και να την εμφανίζει.</p>
<p><strong><em>Άσκηση 3</em></strong><br />
Γράψτε ένα πρόγραμμα που να υπολογίζει χρησιμοποιώντας επανάληψη πόσες φορές χρειάζεται να υποδιπλασιαστεί μια ποσότητα έτσι ώστε να γίνει ίση ή μικρότερη από μια άλλη ποσότητα. Υπολογίστε την ίδια τιμή με χρήση λογαριθμικής συνάρτησης από το <span class="p-style">math.h</span>.</p>
<p><strong><em>Άσκηση 4</em></strong><br />
Δημιουργήστε δύο ίσου μεγέθους πίνακες με τυχαίες τιμές, στο εύρος τιμών από 1 μέχρι 100, που ο χρήστης θα δίνει το πλήθος των στοιχείων τους. Χρησιμοποιήστε τη βιβλιοθήκη GSL για να επιτύχετε τον υπολογισμό του εσωτερικού γινομένου των δύο πινάκων.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>cppreference.com: A list of open source C libraries.</i> <a href="https://en.cppreference.com/w/c/links/libs" target="_blank">https://en.cppreference.com/w/c/links/libs</a>. [Online; accessed 2023-July-12].&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><i>Awesome-c: Curated list of awesome lists.</i> <a href="https://project-awesome.org/inputsh/awesome-c" target="_blank">https://project-awesome.org/inputsh/awesome-c</a>.[Online; accessed 2023-July-12].&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Τζάλλας Αλέξανδρος, Γκόγκος Χρήστος, Τσούλος Ιωάννης &copy 2025

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "toc.follow", "navigation.instant.preview", "navigation.sections"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>